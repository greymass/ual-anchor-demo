{"version":3,"sources":["../../ual-anchor/dist/interfaces.js","../../ual-anchor/dist/AnchorUser.js","../../ual-anchor/dist/UALAnchorError.js","../../ual-anchor/dist/index.js","../../ual-anchor/dist/Anchor.js","../../ual-anchor/dist/AnchorLogo.js","App.js","serviceWorker.js","index.js"],"names":["Object","defineProperty","exports","value","Name","_regeneratorRuntime","_classCallCheck","_createClass","_possibleConstructorReturn","_getPrototypeOf","_inherits","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","universal_authenticator_library_1","eosjs_1","UALAnchorError_1","AnchorUser","_universal_authentica","chain","session","_this","call","accountName","requestPermission","auth","actor","permission","signatureProvider","makeSignatureProvider","rpcEndpoint","rpcEndpoints","rpcEndpointString","concat","protocol","host","port","rpc","JsonRpc","api","Api","key","transaction","_ref","_ref$broadcast","broadcast","_ref$blocksBehind","blocksBehind","_ref$expireSeconds","expireSeconds","mark","_callee","completedTransaction","message","type","cause","wrap","_context","prev","transact","sent","abrupt","returnEosjsTransaction","t0","UALErrorType","Signing","UALAnchorError","stop","publicKey","data","_","_callee2","_context2","console","log","Unsupported","challenge","_callee3","_context3","_callee4","_context4","_callee5","_context5","chainId","_callee6","keys","_context6","getAvailableKeys","DataRequest","_callee7","account","actualKeys","authorizationKeys","_context7","get_account","extractAccountKeys","getKeys","filter","indexOf","length","t1","constructor","name","Validation","keySubsets","permissions","map","required_auth","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","keySubset","err","return","User","interfaces_1","UALError","__export","m","p","hasOwnProperty","_slicedToArray","__importDefault","mod","__esModule","anchor_link_1","AnchorUser_1","AnchorLogo_1","anchor_link_browser_transport_1","Anchor","chains","options","users","anchorIsLoading","storage","sessionStorage","LocalSessionStorage","sessionId","appName","Initialization","_this$chains","_chain$rpcEndpoints","link","Link","service","transport","default","restore","icon","AnchorLogo","text","textColor","background","isLoading","_this$chains2","identity","login","store","Login","remove","reset","Authenticator","keyPrefix","arguments","id","v","join","sessionKey","serialize","localStorage","setItem","JSON","stringify","parse","getItem","LinkSession","removeItem","getTransaction","actions","authorization","from","to","quantity","getTransactionAmount","memo","symbol","TestApp","props","purchase","a","activeUser","ual","getAccountName","getChainId","demoTransaction","signTransaction","setState","setTimeout","resetMessage","info","error","renderLoggedInView","state","style","styles","announcementBar","baseText","onClick","button","blueBG","td","logout","renderLoginButton","showModal","buttonText","Component","UALWrapper","setChain","event","target","search","window","location","URLSearchParams","get","available","c","anchor","container","defaultValue","onChange","select","authenticators","TestAppConsumer","display","backgroundColor","alignItems","justifyContent","height","marginTop","flexDirection","padding","textAlign","borderRadius","color","fontSize","fontWeight","marginBottom","width","top","position","withUAL","App","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.54c47a7e.chunk.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Name = 'Anchor';","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/aaron/projects/ual-anchor-demo/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"/Users/aaron/projects/ual-anchor-demo/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/aaron/projects/ual-anchor-demo/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/aaron/projects/ual-anchor-demo/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/aaron/projects/ual-anchor-demo/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/aaron/projects/ual-anchor-demo/node_modules/@babel/runtime/helpers/inherits\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar universal_authenticator_library_1 = require(\"universal-authenticator-library\");\n\nvar eosjs_1 = require(\"eosjs\");\n\nvar UALAnchorError_1 = require(\"./UALAnchorError\");\n\nvar AnchorUser =\n/*#__PURE__*/\nfunction (_universal_authentica) {\n  _inherits(AnchorUser, _universal_authentica);\n\n  function AnchorUser(chain, session) {\n    var _this;\n\n    _classCallCheck(this, AnchorUser);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AnchorUser).call(this));\n    _this.accountName = '';\n    _this.requestPermission = '';\n    _this.chain = chain;\n    _this.accountName = session.auth.actor;\n    _this.requestPermission = session.auth.permission;\n    _this.signatureProvider = session.makeSignatureProvider();\n    var rpcEndpoint = _this.chain.rpcEndpoints[0];\n    var rpcEndpointString = \"\".concat(rpcEndpoint.protocol, \"://\").concat(rpcEndpoint.host, \":\").concat(rpcEndpoint.port);\n    _this.rpc = new eosjs_1.JsonRpc(rpcEndpointString);\n    _this.api = new eosjs_1.Api({\n      rpc: _this.rpc,\n      signatureProvider: _this.signatureProvider\n    });\n    return _this;\n  }\n\n  _createClass(AnchorUser, [{\n    key: \"signTransaction\",\n    value: function signTransaction(transaction, _ref) {\n      var _ref$broadcast = _ref.broadcast,\n          broadcast = _ref$broadcast === void 0 ? true : _ref$broadcast,\n          _ref$blocksBehind = _ref.blocksBehind,\n          blocksBehind = _ref$blocksBehind === void 0 ? 3 : _ref$blocksBehind,\n          _ref$expireSeconds = _ref.expireSeconds,\n          expireSeconds = _ref$expireSeconds === void 0 ? 30 : _ref$expireSeconds;\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var completedTransaction, message, type, cause;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return this.api.transact(transaction, {\n                  broadcast: broadcast,\n                  blocksBehind: blocksBehind,\n                  expireSeconds: expireSeconds\n                });\n\n              case 3:\n                completedTransaction = _context.sent;\n                return _context.abrupt(\"return\", this.returnEosjsTransaction(broadcast, completedTransaction));\n\n              case 7:\n                _context.prev = 7;\n                _context.t0 = _context[\"catch\"](0);\n                message = _context.t0.message ? _context.t0.message : 'Unable to sign transaction';\n                type = universal_authenticator_library_1.UALErrorType.Signing;\n                cause = _context.t0;\n                throw new UALAnchorError_1.UALAnchorError(message, type, cause);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 7]]);\n      }));\n    }\n  }, {\n    key: \"signArbitrary\",\n    value: function signArbitrary(publicKey, data, _) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                console.log(\"signArbitrary\", publicKey, data);\n                throw new UALAnchorError_1.UALAnchorError(\"Anchor does not currently support signArbitrary\", universal_authenticator_library_1.UALErrorType.Unsupported, null);\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n    }\n  }, {\n    key: \"verifyKeyOwnership\",\n    value: function verifyKeyOwnership(challenge) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                console.log(\"verifyKeyOwnership\", challenge);\n                throw new UALAnchorError_1.UALAnchorError(\"Anchor does not currently support verifyKeyOwnership\", universal_authenticator_library_1.UALErrorType.Unsupported, null);\n\n              case 2:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n    }\n  }, {\n    key: \"getAccountName\",\n    value: function getAccountName() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                return _context4.abrupt(\"return\", this.accountName);\n\n              case 1:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n    }\n  }, {\n    key: \"getChainId\",\n    value: function getChainId() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5() {\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                return _context5.abrupt(\"return\", this.chain.chainId);\n\n              case 1:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n    }\n  }, {\n    key: \"getKeys\",\n    value: function getKeys() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6() {\n        var keys, message, type, cause;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                console.log(\"getKeys\");\n                _context6.prev = 1;\n                _context6.next = 4;\n                return this.signatureProvider.getAvailableKeys(this.requestPermission);\n\n              case 4:\n                keys = _context6.sent;\n                return _context6.abrupt(\"return\", keys);\n\n              case 8:\n                _context6.prev = 8;\n                _context6.t0 = _context6[\"catch\"](1);\n                message = \"Unable to getKeys for account \".concat(this.accountName, \".\\n        Please make sure your wallet is running.\");\n                type = universal_authenticator_library_1.UALErrorType.DataRequest;\n                cause = _context6.t0;\n                throw new UALAnchorError_1.UALAnchorError(message, type, cause);\n\n              case 14:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[1, 8]]);\n      }));\n    }\n  }, {\n    key: \"isAccountValid\",\n    value: function isAccountValid() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7() {\n        var account, actualKeys, authorizationKeys, message, type, cause;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                console.log(\"isAccountValid\");\n                _context7.prev = 1;\n                _context7.t0 = this.rpc;\n\n                if (!_context7.t0) {\n                  _context7.next = 7;\n                  break;\n                }\n\n                _context7.next = 6;\n                return this.rpc.get_account(this.accountName);\n\n              case 6:\n                _context7.t0 = _context7.sent;\n\n              case 7:\n                account = _context7.t0;\n                actualKeys = this.extractAccountKeys(account);\n                _context7.next = 11;\n                return this.getKeys();\n\n              case 11:\n                authorizationKeys = _context7.sent;\n                return _context7.abrupt(\"return\", actualKeys.filter(function (key) {\n                  return authorizationKeys.indexOf(key) !== -1;\n                }).length > 0);\n\n              case 15:\n                _context7.prev = 15;\n                _context7.t1 = _context7[\"catch\"](1);\n\n                if (!(_context7.t1.constructor.name === 'UALAnchorError')) {\n                  _context7.next = 19;\n                  break;\n                }\n\n                throw _context7.t1;\n\n              case 19:\n                message = \"Account validation failed for account \".concat(this.accountName, \".\");\n                type = universal_authenticator_library_1.UALErrorType.Validation;\n                cause = _context7.t1;\n                throw new UALAnchorError_1.UALAnchorError(message, type, cause);\n\n              case 23:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[1, 15]]);\n      }));\n    }\n  }, {\n    key: \"extractAccountKeys\",\n    value: function extractAccountKeys(account) {\n      console.log(\"extractAccountKeys\", account);\n      var keySubsets = account.permissions.map(function (permission) {\n        return permission.required_auth.keys.map(function (key) {\n          return key.key;\n        });\n      });\n      var keys = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = keySubsets[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var keySubset = _step.value;\n          keys = keys.concat(keySubset);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return keys;\n    }\n  }]);\n\n  return AnchorUser;\n}(universal_authenticator_library_1.User);\n\nexports.AnchorUser = AnchorUser;","\"use strict\";\n\nvar _classCallCheck = require(\"/Users/aaron/projects/ual-anchor-demo/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _possibleConstructorReturn = require(\"/Users/aaron/projects/ual-anchor-demo/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/aaron/projects/ual-anchor-demo/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/aaron/projects/ual-anchor-demo/node_modules/@babel/runtime/helpers/inherits\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar universal_authenticator_library_1 = require(\"universal-authenticator-library\");\n\nvar interfaces_1 = require(\"./interfaces\");\n\nvar UALAnchorError =\n/*#__PURE__*/\nfunction (_universal_authentica) {\n  _inherits(UALAnchorError, _universal_authentica);\n\n  function UALAnchorError(message, type, cause) {\n    _classCallCheck(this, UALAnchorError);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(UALAnchorError).call(this, message, type, cause, interfaces_1.Name));\n  }\n\n  return UALAnchorError;\n}(universal_authenticator_library_1.UALError);\n\nexports.UALAnchorError = UALAnchorError;","\"use strict\";\n\nfunction __export(m) {\n  for (var p in m) {\n    if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n  }\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n__export(require(\"./Anchor\"));\n\n__export(require(\"./AnchorUser\"));","\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/aaron/projects/ual-anchor-demo/node_modules/@babel/runtime/regenerator\");\n\nvar _slicedToArray = require(\"/Users/aaron/projects/ual-anchor-demo/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _classCallCheck = require(\"/Users/aaron/projects/ual-anchor-demo/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/aaron/projects/ual-anchor-demo/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/Users/aaron/projects/ual-anchor-demo/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/Users/aaron/projects/ual-anchor-demo/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/Users/aaron/projects/ual-anchor-demo/node_modules/@babel/runtime/helpers/inherits\");\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar universal_authenticator_library_1 = require(\"universal-authenticator-library\");\n\nvar anchor_link_1 = require(\"anchor-link\");\n\nvar interfaces_1 = require(\"./interfaces\");\n\nvar AnchorUser_1 = require(\"./AnchorUser\");\n\nvar AnchorLogo_1 = require(\"./AnchorLogo\");\n\nvar UALAnchorError_1 = require(\"./UALAnchorError\");\n\nvar anchor_link_browser_transport_1 = __importDefault(require(\"anchor-link-browser-transport\"));\n\nvar Anchor =\n/*#__PURE__*/\nfunction (_universal_authentica) {\n  _inherits(Anchor, _universal_authentica);\n\n  // private session?: LinkSession;\n\n  /**\n   * Anchor Constructor.\n   *\n   * @param chains\n   * @param options { appName } appName is a required option to use Scatter\n   */\n  function Anchor(chains, options) {\n    var _this;\n\n    _classCallCheck(this, Anchor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Anchor).call(this, chains));\n    _this.users = []; // Establish sessions for persistence\n\n    _this.anchorIsLoading = true;\n    _this.storage = options.sessionStorage || new LocalSessionStorage();\n    _this.sessionId = chains[0].chainId;\n    _this.users = [];\n\n    if (options && options.appName) {\n      _this.appName = \"\".concat(options.appName, \"-\").concat(chains[0].chainId);\n    } else {\n      throw new UALAnchorError_1.UALAnchorError('Anchor requires the appName property to be set on the `options` argument.', universal_authenticator_library_1.UALErrorType.Initialization, null);\n    }\n\n    return _this;\n  }\n  /**\n   * Called after `shouldRender` and should be used to handle any async actions required to initialize the authenticator\n   */\n\n\n  _createClass(Anchor, [{\n    key: \"init\",\n    value: function init() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this$chains, chain, _chain$rpcEndpoints, rpc, session;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.anchorIsLoading = true; // establish anchor-link\n\n                _this$chains = _slicedToArray(this.chains, 1), chain = _this$chains[0];\n                _chain$rpcEndpoints = _slicedToArray(chain.rpcEndpoints, 1), rpc = _chain$rpcEndpoints[0];\n                this.link = new anchor_link_1.Link({\n                  chainId: chain.chainId,\n                  rpc: \"\".concat(rpc.protocol, \"://\").concat(rpc.host, \":\").concat(rpc.port),\n                  service: 'https://cb.anchor.link',\n                  transport: new anchor_link_browser_transport_1.default()\n                }); // attempt to restore existing session\n\n                session = this.storage.restore(this.link, this.sessionId);\n\n                if (session) {\n                  this.users = [new AnchorUser_1.AnchorUser(chain, session)];\n                }\n\n                this.anchorIsLoading = false;\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n    /**\n     * Resets the authenticator to its initial, default state then calls `init` method\n     */\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.users = [];\n    }\n    /**\n     * Returns true if the authenticator has errored while initializing.\n     */\n\n  }, {\n    key: \"isErrored\",\n    value: function isErrored() {\n      return false;\n    }\n    /**\n     * Returns a URL where the user can download and install the underlying authenticator\n     * if it is not found by the UAL Authenticator.\n     */\n\n  }, {\n    key: \"getOnboardingLink\",\n    value: function getOnboardingLink() {\n      return 'https://github.com/greymass/anchor/';\n    }\n    /**\n     * Returns the amount of seconds after the authentication will be invalid for logging in on new\n     * browser sessions.  Setting this value to zero will cause users to re-attempt authentication on\n     * every new browser session.  Please note that the invalidate time will be saved client-side and\n     * should not be relied on for security.\n     */\n\n  }, {\n    key: \"shouldInvalidateAfter\",\n    value: function shouldInvalidateAfter() {\n      return 0;\n    }\n    /**\n     * Returns error (if available) if the authenticator has errored while initializing.\n     */\n\n  }, {\n    key: \"getError\",\n    value: function getError() {\n      return null;\n    }\n    /**\n     * Returns true if the authenticator is loading while initializing its internal state.\n     */\n\n  }, {\n    key: \"isLoading\",\n    value: function isLoading() {\n      return this.anchorIsLoading;\n    }\n    /**\n     * Returns the style of the Button that will be rendered.\n     */\n\n  }, {\n    key: \"getStyle\",\n    value: function getStyle() {\n      return {\n        icon: AnchorLogo_1.AnchorLogo,\n        text: interfaces_1.Name,\n        textColor: 'white',\n        background: '#021b72'\n      };\n    }\n    /**\n     * Returns whether or not the button should render based on the operating environment and other factors.\n     * ie. If your Authenticator App does not support mobile, it returns false when running in a mobile browser.\n     */\n\n  }, {\n    key: \"shouldRender\",\n    value: function shouldRender() {\n      return this.isLoading();\n    }\n    /**\n     * Returns whether or not the dapp should attempt to auto login with the Authenticator app.\n     * Auto login will only occur when there is only one Authenticator that returns shouldRender() true and\n     * shouldAutoLogin() true.\n     */\n\n  }, {\n    key: \"shouldAutoLogin\",\n    value: function shouldAutoLogin() {\n      return this.users.length > 0;\n    }\n    /**\n     * Returns whether or not the button should show an account name input field.\n     * This is for Authenticators that do not have a concept of account names.\n     */\n\n  }, {\n    key: \"shouldRequestAccountName\",\n    value: function shouldRequestAccountName() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", false);\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n    }\n    /**\n     * Login using the Authenticator App. This can return one or more users depending on multiple chain support.\n     *\n     * @param accountName  The account name of the user for Authenticators that do not store accounts (optional)\n     */\n\n  }, {\n    key: \"login\",\n    value: function login() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        var _this$chains2, chain, identity;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!(this.chains.length > 1)) {\n                  _context3.next = 2;\n                  break;\n                }\n\n                throw new UALAnchorError_1.UALAnchorError('UAL-Anchor does not yet support providing multiple chains to UAL. Please initialize the UAL provider with a single chain.', universal_authenticator_library_1.UALErrorType.Unsupported, null);\n\n              case 2:\n                _context3.prev = 2;\n\n                if (!(this.users.length === 0)) {\n                  _context3.next = 11;\n                  break;\n                }\n\n                _this$chains2 = _slicedToArray(this.chains, 1), chain = _this$chains2[0];\n                _context3.next = 7;\n                return this.link.login(this.appName);\n\n              case 7:\n                identity = _context3.sent;\n                _context3.next = 10;\n                return this.storage.store(identity.session, this.sessionId);\n\n              case 10:\n                this.users = [new AnchorUser_1.AnchorUser(chain, identity.session)];\n\n              case 11:\n                _context3.next = 16;\n                break;\n\n              case 13:\n                _context3.prev = 13;\n                _context3.t0 = _context3[\"catch\"](2);\n                throw new UALAnchorError_1.UALAnchorError(_context3.t0.message, universal_authenticator_library_1.UALErrorType.Login, _context3.t0);\n\n              case 16:\n                return _context3.abrupt(\"return\", this.users);\n\n              case 17:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[2, 13]]);\n      }));\n    }\n    /**\n     * Logs the user out of the dapp. This will be strongly dependent on each Authenticator app's patterns.\n     */\n\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.storage.remove(this.sessionId);\n\n              case 2:\n                this.reset();\n\n              case 3:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n    }\n    /**\n     * Returns true if user confirmation is required for `getKeys`\n     */\n\n  }, {\n    key: \"requiresGetKeyConfirmation\",\n    value: function requiresGetKeyConfirmation() {\n      return false;\n    }\n  }]);\n\n  return Anchor;\n}(universal_authenticator_library_1.Authenticator);\n\nexports.Anchor = Anchor;\n\nvar LocalSessionStorage =\n/*#__PURE__*/\nfunction () {\n  function LocalSessionStorage() {\n    var keyPrefix = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'anchorlink';\n\n    _classCallCheck(this, LocalSessionStorage);\n\n    this.keyPrefix = keyPrefix;\n  }\n\n  _createClass(LocalSessionStorage, [{\n    key: \"sessionKey\",\n    value: function sessionKey(id, accountName) {\n      return [this.keyPrefix, id, accountName].filter(function (v) {\n        return typeof v === 'string' && v.length > 0;\n      }).join('-');\n    }\n  }, {\n    key: \"store\",\n    value: function store(session, id, accountName) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5() {\n        var key, data;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                key = this.sessionKey(id, accountName);\n                data = session.serialize();\n                localStorage.setItem(key, JSON.stringify(data));\n\n              case 3:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n    }\n  }, {\n    key: \"restore\",\n    value: function restore(link, id, accountName) {\n      var key = this.sessionKey(id, accountName);\n      var data = JSON.parse(localStorage.getItem(key) || 'null');\n\n      if (data) {\n        return anchor_link_1.LinkSession.restore(link, data);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(id, accountName) {\n      return __awaiter(this, void 0, void 0,\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6() {\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                localStorage.removeItem(this.sessionKey(id, accountName));\n\n              case 1:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n    }\n  }]);\n\n  return LocalSessionStorage;\n}();","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.AnchorLogo = \"data:image/png;base64,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\";","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nimport { Anchor } from 'ual-anchor'\nimport { UALProvider, withUAL } from 'ual-reactjs-renderer'\n\nconst chains = [{\n  chainId: 'e70aaab8997e1dfce58fbfac80cbbb8fecec7b99cf982a9444273cbc64c41473',\n  name: 'Jungle 2 (Testnet)',\n  rpcEndpoints: [{\n    protocol: 'https',\n    host: 'jungle.greymass.com',\n    port: 443,\n  }]\n},{\n  chainId: '2a02a0053e5a8cf73a56ba0fda11e4d92e0238a4a2aa74fccf46d5a910746840',\n  name: 'Jungle 3 (Testnet)',\n  rpcEndpoints: [{\n    protocol: 'https',\n    host: 'jungle3.greymass.com',\n    port: 443,\n  }]\n},{\n  chainId: 'f11d5128e07177823924a07df63bf59fbd07e52c44bc77d16acc1c6e9d22d37b',\n  name: 'Lynx (Testnet)',\n  rpcEndpoints: [{\n    protocol: 'https',\n    host: 'lynxtestnet.greymass.com',\n    port: 443,\n  }]\n},{\n  chainId: '1eaa0824707c8c16bd25145493bf062aecddfeb56c736f6ba6397f3195f33c9f',\n  name: 'Telos (Testnet)',\n  rpcEndpoints: [{\n    protocol: 'https',\n    host: 'testnet.eos.miami',\n    port: 443,\n  }]\n},{\n  chainId: 'f16b1833c747c43682f4386fca9cbb327929334a762755ebec17f6f23c9b8a12',\n  name: 'WAX (Testnet)',\n  rpcEndpoints: [{\n    protocol: 'https',\n    host: 'waxtestnet.greymass.com',\n    port: 443,\n  }]\n}];\n\nconst getTransaction = (account, chainId) => {\n  return {\n    actions: [{\n      account: 'eosio.token',\n      name: 'transfer',\n      authorization: [{ actor: account, permission: 'active' }],\n      data: {\n        from: account,\n        to: 'teamgreymass',\n        quantity: getTransactionAmount(chainId),\n        memo: 'ual-anchor-demo'\n      },\n    }],\n  }\n}\n\nconst getTransactionAmount = (chainId) => {\n  let symbol = 'EOS'\n  let quantity = '0.0001'\n  switch (chainId) {\n    case 'f11d5128e07177823924a07df63bf59fbd07e52c44bc77d16acc1c6e9d22d37b': {\n      symbol = 'LNX'\n      quantity = '0.00000001'\n      break\n    }\n    case '1eaa0824707c8c16bd25145493bf062aecddfeb56c736f6ba6397f3195f33c9f': {\n      symbol = 'TLOS'\n      break\n    }\n    case 'f16b1833c747c43682f4386fca9cbb327929334a762755ebec17f6f23c9b8a12': {\n      symbol = 'WAX'\n      quantity = '0.00000001'\n      break\n    }\n  }\n  return `${quantity} ${symbol}`\n}\n\nclass TestApp extends Component {\n  static propTypes = {\n    ual: PropTypes.shape({\n      activeUser: PropTypes.object,\n      activeAuthenticator: PropTypes.object,\n      logout: PropTypes.func,\n      showModal: PropTypes.func,\n    }).isRequired,\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      chainId: props.chainId,\n      message: '',\n    }\n  }\n\n  purchase = async () => {\n    const { ual: { activeUser } } = this.props\n    try {\n      const accountName = await activeUser.getAccountName()\n      const demoTransaction = getTransaction(accountName, await activeUser.getChainId())\n      const result = await activeUser.signTransaction(demoTransaction, { expireSeconds: 120, blocksBehind: 3 })\n      this.setState({\n        message: `Transfer Successful!`,\n      }, () => {\n        setTimeout(this.resetMessage, 5000)\n      })\n      console.info('SUCCESS:', result)\n    } catch (e) {\n      console.error('ERROR:', e)\n    }\n  }\n\n  resetMessage = () => this.setState({ message: '' })\n\n  renderLoggedInView = () => (\n    <>\n      {!!this.state.message\n        && (\n          <div style={styles.announcementBar}>\n            <p style={styles.baseText}>{this.state.message}</p>\n          </div>\n        )\n      }\n      <button type='button' onClick={this.purchase} style={{ ...styles.button, ...styles.blueBG }}>\n        <p style={styles.baseText}>{`Transfer 0.0001`}</p>\n      </button>\n      <table>\n        <tbody>\n          <tr>\n            <td style={styles.td}>Blockchain</td>\n            <td style={styles.td}>{this.props.ual.chains[0].name}</td>\n          </tr>\n          <tr>\n            <td style={styles.td}>Account</td>\n            <td style={styles.td}>{this.props.ual.activeUser.accountName}</td>\n          </tr>\n          <tr>\n            <td style={styles.td}>Permission</td>\n            <td style={styles.td}>{this.props.ual.activeUser.requestPermission}</td>\n          </tr>\n        </tbody>\n      </table>\n      <button type='button' onClick={this.props.ual.logout} style={styles.logout}>\n        <p>Logout</p>\n      </button>\n    </>\n  )\n\n  renderLoginButton = () => (\n    <button type='button' onClick={this.props.ual.showModal} style={styles.button}>\n      <p style={{buttonText: styles.buttonText, baseText: styles.baseText}}>Login using {this.props.ual.chains[0].name}</p>\n    </button>\n  )\n\n  render() {\n    const { ual: { activeUser } } = this.props\n    return (activeUser) ? this.renderLoggedInView() : this.renderLoginButton()\n  }\n}\n\nclass UALWrapper extends Component {\n  constructor(props) {\n    super(props)\n    const search = window.location.search;\n    const params = new URLSearchParams(search);\n    const chainId = params.get('chain');\n    this.state = {\n      chainId: chainId || chains[0].chainId\n    }\n  }\n  setChain = (event) => this.setState({ chainId: event.target.value })\n  render () {\n    const { chainId } = this.state\n    const { available } = this.props\n    const [ chain ] = available.filter((c) => c.chainId === chainId)\n    if (!chain) {\n      return (\n        <div>Invalid Chain ID</div>\n      )\n    }\n    const anchor = new Anchor([chain], { appName: 'ual-anchor-demo' })\n    return (\n      <div style={styles.container}>\n        <p>\n          <select\n            defaultValue={chainId}\n            onChange={this.setChain}\n            style={styles.select}\n          >\n            {chains.map((chain) => (\n              <option\n                key={chain.chainId}\n                value={chain.chainId}\n              >\n                {chain.name}\n              </option>\n            ))}\n          </select>\n        </p>\n        <UALProvider\n          appName='Anchor + Authenticator Test App'\n          authenticators={[anchor]}\n          chains={[chain]}\n          key={chain.chainId}\n        >\n          <TestAppConsumer />\n        </UALProvider>\n      </div>\n    )\n  }\n}\n\nconst styles = {\n  container: {\n    display: 'flex',\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'top',\n    height: '100vh',\n    marginTop: '10vh',\n    flexDirection: 'column',\n  },\n  button: {\n    padding: '10px 60px',\n    backgroundColor: '#EA2E2E',\n    textAlign: 'center',\n    borderRadius: 5,\n    color: '#FFFFFF',\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: '2em',\n  },\n  select: {\n    textAlign: 'center',\n    borderRadius: 5,\n    fontSize: 24,\n    fontWeight: 'bold',\n    width: '200px',\n  },\n  logout: {\n    marginTop: 20,\n  },\n  baseText: {\n    color: '#fff',\n    fontSize: 18,\n  },\n  blueBG: {\n    backgroundColor: '#447DD8',\n  },\n  announcementBar: {\n    width: '100%',\n    padding: '10px 50px 10px 20px',\n    textAlign: 'center',\n    backgroundColor: '#3de13d',\n    top: 0,\n    position: 'absolute',\n    alignItems: 'center',\n  },\n}\n\nconst TestAppConsumer = withUAL(TestApp)\n\nconst App = () => (\n  <UALWrapper available={chains} />\n)\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister()"],"sourceRoot":""}