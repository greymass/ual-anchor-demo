(window["webpackJsonpual-anchor-demo"]=window["webpackJsonpual-anchor-demo"]||[]).push([[0],{131:function(e,t,n){"use strict";(function(t){var r=n(132),a=n(262),i=n(264),o=n(11),s=n(63),c=n(81),u=n(44),f=a.Long;function l(e,n,r,f,l){if(!(e=c(e)))throw new TypeError("private_key is required");if(!(n=s(n)))throw new TypeError("public_key is required");if(!(r=p(r)))throw new TypeError("nonce is required");if(!t.isBuffer(f)){if("string"!==typeof f)throw new TypeError("message should be buffer or string");f=new t(f,"binary")}if(l&&"number"!==typeof l)throw new TypeError("checksum should be a number");var h=e.getSharedSecret(n),d=new a(a.DEFAULT_CAPACITY,a.LITTLE_ENDIAN);d.writeUint64(r),d.append(h.toString("binary"),"binary"),d=new t(d.copy(0,d.offset).toBinary(),"binary");var g=u.sha512(d),m=g.slice(32,48),y=g.slice(0,32),b=u.sha256(g);b=b.slice(0,4);var w=a.fromBinary(b.toString("binary"),a.DEFAULT_CAPACITY,a.LITTLE_ENDIAN);if(b=w.readUint32(),l){if(b!==l)throw new Error("Invalid key");f=function(e,n,r){o(e,"Missing cipher text"),e=v(e);var a=i.createDecipheriv("aes-256-cbc",n,r);return e=t.concat([a.update(e),a.final()])}(f,y,m)}else f=function(e,n,r){o(e,"Missing plain text"),e=v(e);var a=i.createCipheriv("aes-256-cbc",n,r);return e=t.concat([a.update(e),a.final()])}(f,y,m);return{nonce:r,message:f,checksum:b}}function h(){if(null===d){var e=new Uint8Array(r(2));d=parseInt(e[0]<<8|e[1],10)}var t=f.fromNumber(Date.now()),n=++d%65535;return(t=t.shiftLeft(16).or(f.fromNumber(n))).toString()}e.exports={encrypt:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h();return l(e,t,r,n)},decrypt:function(e,t,n,r,a){return l(e,t,n,r,a).message}};var d=null,p=function(e){return e?f.isLong(e)?e:f.fromString(e):e},v=function(e){return e?t.isBuffer(e)?e:new t(e,"binary"):e}}).call(this,n(2).Buffer)},156:function(e,t,n){"use strict";(function(t){var r=n(79),a=r(n(101)),i=r(n(80)),o=n(305),s=n(44),c=n(102).getCurveByName("secp256k1"),u=n(11),f=n(35),l=n(64),h=n(63),d=n(81);function p(e,n,r){function a(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"utf8";return"string"===typeof e&&(e=t.from(e,r)),u(t.isBuffer(e),"data is a required String or Buffer"),i(e=s.sha256(e),n)}function i(r,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hex";if("string"===typeof r&&(r=t.from(r,i)),32!==r.length||!t.isBuffer(r))throw new Error("dataSha256: 32 bytes required");var s=h(a);return u(s,"pubkey required"),o.verify(c,r,{r:e,s:n},s.Q)}function d(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";return"string"===typeof e&&(e=t.from(e,n)),console.log(e),u(t.isBuffer(e),"data is a required String or Buffer"),p(e=s.sha256(e))}function p(a){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hex";if("string"===typeof a&&(a=t.from(a,i)),32!==a.length||!t.isBuffer(a))throw new Error("dataSha256: 32 byte String or buffer requred");var s=f.fromBuffer(a),u=r;u-=27,u&=3;var l=o.recoverPubKey(c,s,{r:e,s:n,i:r},u);return h.fromPoint(l)}function v(){var a;return(a=new t(65)).writeUInt8(r,0),e.toBuffer(32).copy(a,1),n.toBuffer(32).copy(a,33),a}var g;return u.equal(null!=e,!0,"Missing parameter"),u.equal(null!=n,!0,"Missing parameter"),u.equal(null!=r,!0,"Missing parameter"),{r:e,s:n,i:r,toBuffer:v,verify:a,verifyHash:i,verifyHex:function(e,n){return console.log('Deprecated: use verify(data, pubkey, "hex")'),a(t.from(e,"hex"),n)},recover:d,recoverHash:p,toHex:function(){return v().toString("hex")},toString:function(){return g||(g="SIG_K1_"+l.checkEncode(v(),"K1"))},verifyBuffer:function(){return console.log("Deprecated: use signature.verify instead (same arguments)"),a.apply(void 0,arguments)},recoverPublicKey:function(){return console.log("Deprecated: use signature.recover instead (same arguments)"),d.apply(void 0,arguments)},recoverPublicKeyFromBuffer:function(){return console.log("Deprecated: use signature.recoverHash instead (same arguments)"),p.apply(void 0,arguments)}}}e.exports=p,p.sign=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"utf8";return"string"===typeof e&&(e=t.from(e,r)),u(t.isBuffer(e),"data is a required String or Buffer"),e=s.sha256(e),p.signHash(e,n)},p.signHash=function(e,n){var r,a,i,s,l,h,v,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hex";if("string"===typeof e&&(e=t.from(e,g)),32!==e.length||!t.isBuffer(e))throw new Error("dataSha256: 32 byte buffer requred");for(n=d(n),u(n,"privateKey required"),s=null,v=0,a=f.fromBuffer(e);;){if(h=(r=(i=o.sign(c,e,n.d,v++)).toDER())[5+(l=r[3])],32===l&&32===h){s=o.calcPubKeyRecoveryParam(c,a,i,n.toPublic().Q),s+=4,s+=27;break}v%10===0&&console.log("WARN: "+v+" attempts to find canonical signature")}return p(i.r,i.s,s)},p.fromBuffer=function(e){var n;return u(t.isBuffer(e),"Buffer is required"),u.equal(e.length,65,"Invalid signature length"),n=e.readUInt8(0),u.equal(n-27,n-27&7,"Invalid signature parameter"),p(f.fromBuffer(e.slice(1,33)),f.fromBuffer(e.slice(33)),n)},p.fromHex=function(e){return p.fromBuffer(t.from(e,"hex"))},p.fromString=function(e){try{return p.fromStringOrThrow(e)}catch(t){return null}},p.fromStringOrThrow=function(e){u.equal((0,i.default)(e),"string","signature");var t=e.match(/^SIG_([A-Za-z0-9]+)_([A-Za-z0-9]+)$/);u(null!=t&&3===t.length,"Expecting signature like: SIG_K1_base58signature..");var n=(0,a.default)(t,3),r=n[1],o=n[2];return u.equal(r,"K1","K1 signature expected"),p.fromBuffer(l.checkDecode(o,r))},p.from=function(e){var n=e?e.r&&e.s&&e.i?e:"string"===typeof e&&130===e.length?p.fromHex(e):"string"===typeof e&&130!==e.length?p.fromStringOrThrow(e):t.isBuffer(e)?p.fromBuffer(e):null:e;if(!n)throw new TypeError("signature should be a hex string or buffer");return n}}).call(this,n(2).Buffer)},157:function(e,t,n){"use strict";(function(t){function n(e){var t=e.toString().match(/function (.*?)\(/);return t?t[1]:null}e.exports=function(e,r){switch(e){case"Array":if(Array.isArray(r))return;break;case"Boolean":if("boolean"===typeof r)return;break;case"Buffer":if(t.isBuffer(r))return;break;case"Number":if("number"===typeof r)return;break;case"String":if("string"===typeof r)return;break;default:if(n(r.constructor)===n(e))return}throw new TypeError("Expected "+(n(e)||e)+", got "+r)}}).call(this,n(2).Buffer)},163:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Name="Anchor"},164:function(e,t,n){"use strict";var r=n(1),a=n(7),i=n(10),o=n(17),s=n(15),c=n(18),u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});var f=n(95),l=n(165),h=function(e){function t(e,n){var r;return a(this,t),(r=o(this,s(t).call(this))).accountName="",r.requestPermission="",r.chainId=n.link.chainId,r.accountName=n.auth.actor,r.requestPermission=n.auth.permission,r.session=n,r.rpc=e,r}return c(t,e),i(t,[{key:"signTransaction",value:function(e,t){return u(this,void 0,void 0,r.mark((function n(){var a,i,o,s;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.session.transact(e,t);case 3:return a=n.sent,n.abrupt("return",this.returnEosjsTransaction(t.broadcast,a));case 7:throw n.prev=7,n.t0=n.catch(0),i=n.t0.message?n.t0.message:"Unable to sign transaction",o=f.UALErrorType.Signing,s=n.t0,new l.UALAnchorError(i,o,s);case 13:case"end":return n.stop()}}),n,this,[[0,7]])})))}},{key:"signArbitrary",value:function(e,t,n){return u(this,void 0,void 0,r.mark((function n(){return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:throw console.log("signArbitrary",e,t),new l.UALAnchorError("Anchor does not currently support signArbitrary",f.UALErrorType.Unsupported,null);case 2:case"end":return n.stop()}}),n)})))}},{key:"verifyKeyOwnership",value:function(e){return u(this,void 0,void 0,r.mark((function t(){return r.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw console.log("verifyKeyOwnership",e),new l.UALAnchorError("Anchor does not currently support verifyKeyOwnership",f.UALErrorType.Unsupported,null);case 2:case"end":return t.stop()}}),t)})))}},{key:"getAccountName",value:function(){return u(this,void 0,void 0,r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.accountName);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getChainId",value:function(){return u(this,void 0,void 0,r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.chainId);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getKeys",value:function(){return u(this,void 0,void 0,r.mark((function e(){var t,n,a,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getKeys"),e.prev=1,e.next=4,this.signatureProvider.getAvailableKeys(this.requestPermission);case 4:return t=e.sent,e.abrupt("return",t);case 8:throw e.prev=8,e.t0=e.catch(1),n="Unable to getKeys for account ".concat(this.accountName,".\n        Please make sure your wallet is running."),a=f.UALErrorType.DataRequest,i=e.t0,new l.UALAnchorError(n,a,i);case 14:case"end":return e.stop()}}),e,this,[[1,8]])})))}},{key:"isAccountValid",value:function(){return u(this,void 0,void 0,r.mark((function e(){var t,n,a,i,o,s;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("isAccountValid"),e.prev=1,e.t0=this.rpc,!e.t0){e.next=7;break}return e.next=6,this.rpc.get_account(this.accountName);case 6:e.t0=e.sent;case 7:return t=e.t0,n=this.extractAccountKeys(t),e.next=11,this.getKeys();case 11:return a=e.sent,e.abrupt("return",n.filter((function(e){return-1!==a.indexOf(e)})).length>0);case 15:if(e.prev=15,e.t1=e.catch(1),"UALAnchorError"!==e.t1.constructor.name){e.next=19;break}throw e.t1;case 19:throw i="Account validation failed for account ".concat(this.accountName,"."),o=f.UALErrorType.Validation,s=e.t1,new l.UALAnchorError(i,o,s);case 23:case"end":return e.stop()}}),e,this,[[1,15]])})))}},{key:"extractAccountKeys",value:function(e){console.log("extractAccountKeys",e);var t=e.permissions.map((function(e){return e.required_auth.keys.map((function(e){return e.key}))})),n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var c=o.value;n=n.concat(c)}}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}}]),t}(f.User);t.AnchorUser=h},165:function(e,t,n){"use strict";var r=n(7),a=n(17),i=n(15),o=n(18);Object.defineProperty(t,"__esModule",{value:!0});var s=n(95),c=n(163),u=function(e){function t(e,n,o){return r(this,t),a(this,i(t).call(this,e,n,o,c.Name))}return o(t,e),t}(s.UALError);t.UALAnchorError=u},223:function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(239)),r(n(164))},226:function(e,t,n){"use strict";t.a={version:"eosio::abi/1.1",types:[],structs:[{name:"sealed_message",base:"",fields:[{name:"from",type:"public_key"},{name:"nonce",type:"uint64"},{name:"ciphertext",type:"bytes"},{name:"checksum",type:"uint32"}]},{name:"link_create",base:"",fields:[{name:"session_name",type:"name"},{name:"request_key",type:"public_key"}]},{name:"link_info",base:"",fields:[{name:"expiration",type:"time_point_sec"}]}],actions:[],ricardian_clauses:[],error_messages:[],tables:[],abi_extensions:[]}},23:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return f}));var r=n(14),a=n(31),i=n(26),o=n(30),s=n(93),c=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(a.a)(this,Object(i.a)(t).call(this,"User canceled request ".concat(e?"("+e+")":"")))).code="E_CANCEL",n}return Object(o.a)(t,e),t}(Object(s.a)(Error)),u=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(a.a)(this,Object(i.a)(t).call(this,"Unable to verify identity ".concat(e?"("+e+")":"")))).code="E_IDENTITY",n}return Object(o.a)(t,e),t}(Object(s.a)(Error)),f=function(e){function t(e,n){var o;return Object(r.a)(this,t),(o=Object(a.a)(this,Object(i.a)(t).call(this,e))).code=n,o}return Object(o.a)(t,e),t}(Object(s.a)(Error))},233:function(e,t,n){e.exports=n(539)},239:function(e,t,n){"use strict";var r=n(1),a=n(126),i=n(7),o=n(10),s=n(17),c=n(15),u=n(18),f=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var h=n(95),d=l(n(251)),p=n(163),v=n(164),g=n(316),m=n(165),y=l(n(540)),b=function(e){function t(e,n){var r;i(this,t),(r=s(this,c(t).call(this,e))).users=[],r.chainId=e[0].chainId,r.service=n.service||"https://cb.anchor.link",r.users=[];var o=a(e,1)[0],u=a(o.rpcEndpoints,1)[0];if(r.rpc="".concat(u.protocol,"://").concat(u.host,":").concat(u.port),!n||!n.appName)throw new m.UALAnchorError("ual-anchor requires the appName property to be set on the `options` argument during initialization.",h.UALErrorType.Initialization,null);if(r.appName=n.appName,n&&n.rpc){var f=n.rpc;f.fetchBuiltin&&(f.fetchBuiltin=f.fetchBuiltin.bind(window)),r.rpc=f}return r}return u(t,e),o(t,[{key:"init",value:function(){return f(this,void 0,void 0,r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.link=new d.default({chainId:this.chainId,rpc:this.rpc,service:this.service,transport:new y.default({requestStatus:!1})}),e.next=3,this.link.restoreSession(this.appName);case 3:(t=e.sent)&&(this.users=[new v.AnchorUser(this.rpc,t)]);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"reset",value:function(){this.users=[]}},{key:"isErrored",value:function(){return!1}},{key:"getOnboardingLink",value:function(){return"https://github.com/greymass/anchor/"}},{key:"getError",value:function(){return null}},{key:"isLoading",value:function(){return!1}},{key:"getStyle",value:function(){return{icon:g.AnchorLogo,text:p.Name,textColor:"white",background:"#3650A2"}}},{key:"shouldRender",value:function(){return!this.isLoading()}},{key:"shouldAutoLogin",value:function(){return this.users.length>0}},{key:"shouldRequestAccountName",value:function(){return f(this,void 0,void 0,r.mark((function e(){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})))}},{key:"login",value:function(){return f(this,void 0,void 0,r.mark((function e(){var t;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.chains.length>1)){e.next=2;break}throw new m.UALAnchorError("UAL-Anchor does not yet support providing multiple chains to UAL. Please initialize the UAL provider with a single chain.",h.UALErrorType.Unsupported,null);case 2:if(e.prev=2,0!==this.users.length){e.next=8;break}return e.next=6,this.link.login(this.appName);case 6:t=e.sent,this.users=[new v.AnchorUser(this.rpc,t.session)];case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(2),new m.UALAnchorError(e.t0.message,h.UALErrorType.Login,e.t0);case 13:return e.abrupt("return",this.users);case 14:case"end":return e.stop()}}),e,this,[[2,10]])})))}},{key:"logout",value:function(){return f(this,void 0,void 0,r.mark((function e(){var t,n,i;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a(this.users,1),n=t[0],i=n.session.auth,e.next=4,this.link.removeSession(this.appName,i);case 4:this.reset();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"requiresGetKeyConfirmation",value:function(){return!1}}]),t}(h.Authenticator);t.Anchor=b},251:function(e,t,n){"use strict";n.r(t);var r=n(90);n.d(t,"Link",(function(){return r.a}));var a=n(57);n.d(t,"LinkSession",(function(){return a.c})),n.d(t,"LinkChannelSession",(function(){return a.a})),n.d(t,"LinkFallbackSession",(function(){return a.b}));var i=n(23);n.d(t,"CancelError",(function(){return i.a})),n.d(t,"IdentityError",(function(){return i.b})),n.d(t,"SessionError",(function(){return i.c}));var o=n(22);n.d(t,"PlaceholderAuth",(function(){return o.a})),n.d(t,"PlaceholderName",(function(){return o.b})),n.d(t,"PlaceholderPermission",(function(){return o.c})),t.default=r.a},261:function(e,t,n){"use strict";n(131);var r=n(81),a=n(63),i=n(156),o=(n(64),n(44)),s={initialize:r.initialize,unsafeRandomKey:function(){return r.unsafeRandomKey().then((function(e){return e.toString()}))},randomKey:function(e){return r.randomKey(e).then((function(e){return e.toString()}))},seedPrivate:function(e){return r.fromSeed(e).toString()},privateToPublic:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EOS";return r(e).toPublic().toString(t)},isValidPublic:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EOS";return a.isValid(e,t)},isValidPrivate:function(e){return r.isValid(e)},sign:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"utf8";if(!0===n)throw new TypeError("API changed, use signHash(..) instead");return!1===n&&console.log("Warning: ecc.sign hashData parameter was removed"),i.sign(e,t,n).toString()},signHash:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hex";return i.signHash(e,t,n).toString()},verify:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"utf8";if(!0===r)throw new TypeError("API changed, use verifyHash(..) instead");return!1===r&&console.log("Warning: ecc.verify hashData parameter was removed"),(e=i.from(e)).verify(t,n,r)},verifyHash:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hex";return(e=i.from(e)).verifyHash(t,n,r)},recover:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"utf8";if(!0===n)throw new TypeError("API changed, use recoverHash(signature, data) instead");return!1===n&&console.log("Warning: ecc.recover hashData parameter was removed"),(e=i.from(e)).recover(t,n).toString()},recoverHash:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hex";return(e=i.from(e)).recoverHash(t,n).toString()},sha256:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hex";return o.sha256(e,t)}};e.exports=s},266:function(e,t){},268:function(e,t){},304:function(e,t,n){"use strict";e.exports=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return new Promise((function(t,r){setTimeout((function(){try{t(e.apply(void 0,n))}catch(a){r(a)}}))}))}}},305:function(e,t,n){"use strict";(function(t){var r=n(11),a=n(44),i=n(157),o=n(35),s=n(306);function c(e,n,s,c,u){i("Buffer",n),i(o,s),u&&(n=a.sha256(t.concat([n,new t(u)]))),r.equal(n.length,32,"Hash must be 256 bit");var f=s.toBuffer(32),l=new t(32),h=new t(32);h.fill(1),l.fill(0),l=a.HmacSHA256(t.concat([h,new t([0]),f,n]),l),h=a.HmacSHA256(h,l),l=a.HmacSHA256(t.concat([h,new t([1]),f,n]),l),h=a.HmacSHA256(h,l),h=a.HmacSHA256(h,l);for(var d=o.fromBuffer(h);d.signum()<=0||d.compareTo(e.n)>=0||!c(d);)l=a.HmacSHA256(t.concat([h,new t([0])]),l),h=a.HmacSHA256(h,l),h=a.HmacSHA256(h,l),d=o.fromBuffer(h);return d}function u(e,t,n,r){var a=e.n,i=e.G,o=n.r,s=n.s;if(o.signum()<=0||o.compareTo(a)>=0)return!1;if(s.signum()<=0||s.compareTo(a)>=0)return!1;var c=s.modInverse(a),u=t.multiply(c).mod(a),f=o.multiply(c).mod(a),l=i.multiplyTwo(u,r,f);return!e.isInfinity(l)&&l.affineX.mod(a).equals(o)}function f(e,t,n,a){r.strictEqual(3&a,a,"Recovery param is more than two bits");var i=e.n,o=e.G,s=n.r,c=n.s;r(s.signum()>0&&s.compareTo(i)<0,"Invalid r value"),r(c.signum()>0&&c.compareTo(i)<0,"Invalid s value");var u=1&a,f=a>>1?s.add(i):s,l=e.pointFromX(u,f),h=l.multiply(i);r(e.isInfinity(h),"nR is not a valid curve point");var d=t.negate().mod(i),p=s.modInverse(i),v=l.multiplyTwo(c,o,d).multiply(p);return e.validate(v),v}e.exports={calcPubKeyRecoveryParam:function(e,t,n,r){for(var a=0;a<4;a++){if(f(e,t,n,a).equals(r))return a}throw new Error("Unable to find valid recovery factor")},deterministicGenerateK:c,recoverPubKey:f,sign:function(e,t,n,r){var a,i,u=o.fromBuffer(t),f=e.n,l=e.G,h=(c(e,t,n,(function(t){var r=l.multiply(t);return!e.isInfinity(r)&&(0!==(a=r.affineX.mod(f)).signum()&&0!==(i=t.modInverse(f).multiply(u.add(n.multiply(a))).mod(f)).signum())}),r),f.shiftRight(1));return i.compareTo(h)>0&&(i=f.subtract(i)),s(a,i)},verify:function(e,t,n,r){return u(e,o.fromBuffer(t),n,r)},verifyRaw:u}}).call(this,n(2).Buffer)},306:function(e,t,n){"use strict";(function(t){var r=n(11),a=n(157),i=n(35);function o(e,n){function r(){var r=e.toDERInteger(),a=n.toDERInteger(),i=[];return i.push(2,r.length),(i=i.concat(r)).push(2,a.length),(i=i.concat(a)).unshift(48,i.length),new t(i)}return a(i,e),a(i,n),{r:e,s:n,toCompact:function(r,a){a&&(r+=4),r+=27;var i=new t(65);return i.writeUInt8(r,0),e.toBuffer(32).copy(i,1),n.toBuffer(32).copy(i,33),i},toDER:r,toScriptSignature:function(e){var n=new t(1);return n.writeUInt8(e,0),t.concat([r(),n])}}}o.parseCompact=function(e){r.equal(e.length,65,"Invalid signature length");var t=e.readUInt8(0)-27;return r.equal(t,7&t,"Invalid signature parameter"),{compressed:!!(4&t),i:t&=3,signature:o(i.fromBuffer(e.slice(1,33)),i.fromBuffer(e.slice(33)))}},o.fromDER=function(e){r.equal(e.readUInt8(0),48,"Not a DER sequence"),r.equal(e.readUInt8(1),e.length-2,"Invalid sequence length"),r.equal(e.readUInt8(2),2,"Expected a DER integer");var t=e.readUInt8(3);r(t>0,"R length is zero");var n=4+t;r.equal(e.readUInt8(n),2,"Expected a DER integer (2)");var a=e.readUInt8(n+1);r(a>0,"S length is zero");var s=e.slice(4,n),c=e.slice(n+2);n+=2+a,t>1&&0===s.readUInt8(0)&&r(128&s.readUInt8(1),"R value excessively padded"),a>1&&0===c.readUInt8(0)&&r(128&c.readUInt8(1),"S value excessively padded"),r.equal(n,e.length,"Invalid DER encoding");var u=i.fromDERInteger(s),f=i.fromDERInteger(c);return r(u.signum()>=0,"R value is negative"),r(f.signum()>=0,"S value is negative"),o(u,f)},o.parseScriptSignature=function(e){var t=e.readUInt8(e.length-1),n=-129&t;return r(n>0&&n<4,"Invalid hashType"),{signature:o.fromDER(e.slice(0,-1)),hashType:t}},e.exports=o}).call(this,n(2).Buffer)},307:function(e,t,n){"use strict";var r=n(131),a=n(81),i=n(63),o=n(156),s=n(64);e.exports={Aes:r,PrivateKey:a,PublicKey:i,Signature:o,key_utils:s}},316:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnchorLogo="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB3aWR0aD0iMTYwIiBoZWlnaHQ9IjE2MCIgdmlld0JveD0iMCAwIDI1NiAyNTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGcgdHJhbnNmb3JtPSJtYXRyaXgoMS40NCwgMCwgMCwgMS40NCwgLTguNTAxOTI1LCAtNTcuMDc0NTcpIiBzdHlsZT0iIj4KICAgIDx0aXRsZT5XaGl0ZTwvdGl0bGU+CiAgICA8Y2lyY2xlIGN4PSI5NC43OTMiIGN5PSIxMjguNTI0IiByPSI4MCIgZmlsbD0iI0ZCRkRGRiIvPgogICAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0gOTQuNzk5IDc4LjUyNCBDIDk3LjA5OCA3OC41MjQgOTkuMTk1IDc5LjgzNyAxMDAuMTk4IDgxLjkwNiBMIDEyNC4yMDQgMTMxLjQwNiBMIDEyNC43NDYgMTMyLjUyNCBMIDExMS40MDkgMTMyLjUyNCBMIDEwNy41MyAxMjQuNTI0IEwgODIuMDY5IDEyNC41MjQgTCA3OC4xODkgMTMyLjUyNCBMIDY0Ljg1MyAxMzIuNTI0IEwgNjUuMzk1IDEzMS40MDYgTCA4OS40MDEgODEuOTA2IEMgOTAuNDA0IDc5LjgzNyA5Mi41MDEgNzguNTI0IDk0Ljc5OSA3OC41MjQgWiBNIDg2LjkxOSAxMTQuNTI0IEwgMTAyLjY4IDExNC41MjQgTCA5NC43OTkgOTguMjc0IEwgODYuOTE5IDExNC41MjQgWiBNIDExMi43OTMgMTQ5LjUyNCBMIDEyNC43OTggMTQ5LjUyNCBDIDEyNC40MzcgMTY1LjY3NiAxMTEuMDY3IDE3OC41MjQgOTQuNzk5IDE3OC41MjQgQyA3OC41MzIgMTc4LjUyNCA2NS4xNjIgMTY1LjY3NiA2NC44MDEgMTQ5LjUyNCBMIDc2LjgwNiAxNDkuNTI0IEMgNzcuMDg3IDE1Ni44NzggODEuOTc0IDE2My4xNTUgODguNzkzIDE2NS41MiBMIDg4Ljc5MyAxNDEuNTI0IEMgODguNzkzIDEzOC4yMSA5MS40OCAxMzUuNTI0IDk0Ljc5MyAxMzUuNTI0IEMgOTguMTA3IDEzNS41MjQgMTAwLjc5MyAxMzguMjEgMTAwLjc5MyAxNDEuNTI0IEwgMTAwLjc5MyAxNjUuNTI0IEMgMTA3LjYyIDE2My4xNjIgMTEyLjUxMSAxNTYuODgzIDExMi43OTMgMTQ5LjUyNCBaIiBmaWxsPSIjMzY1MEEyIi8+CiAgPC9nPgo8L3N2Zz4="},33:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return p}));var r=n(1),a=n.n(r),i=n(5),o=n(6),s=n(41),c=n(226),u=o.Serialize.getTypesFromAbi(o.Serialize.createInitialTypes(),c.a);function f(e,t){var n=u.get(t);if(!n)throw new Error("No such type: ".concat(t));var r=new o.Serialize.SerialBuffer;return n.serialize(r,e),r.asUint8Array()}function l(e,t,n){var r=s.Aes.encrypt(t,n,e);return f({from:s.privateToPublic(t),nonce:r.nonce.toString(),ciphertext:r.message,checksum:r.checksum},"sealed_message")}function h(e){return e.startsWith("PUB_")?e:o.Numeric.publicKeyToString(o.Numeric.stringToPublicKey("EOS"+e.substr(-50)))}function d(e,t){return h(e)===h(t)}function p(){return v.apply(this,arguments)}function v(){return(v=Object(i.a)(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("undefined"===typeof window||!window.crypto){t.next=6;break}return n=new Uint32Array(32),window.crypto.getRandomValues(n),t.abrupt("return",s.PrivateKey.fromBuffer(e.from(n)).toString());case 6:return t.next=8,s.randomKey();case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}).call(this,n(2).Buffer)},41:function(e,t,n){"use strict";var r=n(261),a=n(307),i=Object.assign({},r,a);e.exports=i},418:function(e,t){},439:function(e,t){},44:function(e,t,n){"use strict";var r=n(151),a=n(295);e.exports={sha1:function(e,t){return r("sha1").update(e).digest(t)},sha256:function(e,t){return r("sha256").update(e).digest(t)},sha512:function(e,t){return r("sha512").update(e).digest(t)},HmacSHA256:function(e,t){return a("sha256",t).update(e).digest()},ripemd160:function(e){try{return r("rmd160").update(e).digest()}catch(t){return r("ripemd160").update(e).digest()}}}},440:function(e,t){},539:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),i=n(222),o=n.n(i),s=n(58),c=n(27),u=n(14),f=n(20),l=n(31),h=n(26),d=n(30),p=n(1),v=n.n(p),g=n(5),m=n(223),y=n(228),b=n(229),w=n(123),k=[{chainId:"0db13ab9b321c37c0ba8481cb4681c2788b622c3abfd1f12f0e5353d44ba6e72",name:"Block.one Testnet",rpcEndpoints:[{protocol:"https",host:"api.testnet.eos.io",port:443}]},{chainId:"b20901380af44ef59c5918439a1f9a41d83669020319a80574b804a5f95cbd7e",name:"FIO (Testnet)",rpcEndpoints:[{protocol:"https",host:"fiotestnet.greymass.com",port:443}]},{chainId:"e70aaab8997e1dfce58fbfac80cbbb8fecec7b99cf982a9444273cbc64c41473",name:"Jungle 2 (Testnet)",rpcEndpoints:[{protocol:"https",host:"jungle.greymass.com",port:443}]},{chainId:"2a02a0053e5a8cf73a56ba0fda11e4d92e0238a4a2aa74fccf46d5a910746840",name:"Jungle 3 (Testnet)",rpcEndpoints:[{protocol:"https",host:"jungle3.greymass.com",port:443}]},{chainId:"f11d5128e07177823924a07df63bf59fbd07e52c44bc77d16acc1c6e9d22d37b",name:"Lynx (Testnet)",rpcEndpoints:[{protocol:"https",host:"lynxtestnet.greymass.com",port:443}]},{chainId:"1eaa0824707c8c16bd25145493bf062aecddfeb56c736f6ba6397f3195f33c9f",name:"Telos (Testnet)",rpcEndpoints:[{protocol:"https",host:"testnet.eos.miami",port:443}]},{chainId:"f16b1833c747c43682f4386fca9cbb327929334a762755ebec17f6f23c9b8a12",name:"WAX (Testnet)",rpcEndpoints:[{protocol:"https",host:"waxtestnet.greymass.com",port:443}]}],x=function(e,t,n){var r={from:e,to:"teamgreymass",quantity:S(n),memo:"ual-anchor-demo"};switch(n){case"0db13ab9b321c37c0ba8481cb4681c2788b622c3abfd1f12f0e5353d44ba6e72":r={from:e,to:"csxdbqrkklmm",quantity:S(n),memo:"ual-anchor-demo"};break;case"b20901380af44ef59c5918439a1f9a41d83669020319a80574b804a5f95cbd7e":r={payee_public_key:"FIO6smr7ThQMWYBHzEvkzTZdxNNmUwxqh2VXdXZdDdzYHgakgqCeb",amount:S(n),max_fee:2e9,actor:e,tpid:null}}return r},E=function(e){var t="eosio.token",n="transfer";switch(e){case"b20901380af44ef59c5918439a1f9a41d83669020319a80574b804a5f95cbd7e":t="fio.token",n="trnsfiopubky"}return{account:t,name:n}},I=function(e,t,n){var r=E(n);return{actions:[{account:r.account,name:r.name,authorization:[{actor:e,permission:t}],data:x(e,0,n)}]}},S=function(e){var t="EOS",n="0.0001";switch(e){case"0db13ab9b321c37c0ba8481cb4681c2788b622c3abfd1f12f0e5353d44ba6e72":t="TNT";break;case"f11d5128e07177823924a07df63bf59fbd07e52c44bc77d16acc1c6e9d22d37b":t="LNX",n="0.00000001";break;case"1eaa0824707c8c16bd25145493bf062aecddfeb56c736f6ba6397f3195f33c9f":t="TLOS";break;case"f16b1833c747c43682f4386fca9cbb327929334a762755ebec17f6f23c9b8a12":t="WAX",n="0.00000001";break;case"b20901380af44ef59c5918439a1f9a41d83669020319a80574b804a5f95cbd7e":return parseInt(1e-8,10)}return"".concat(n," ").concat(t)},T=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).purchase=Object(g.a)(v.a.mark((function e(){var t,r,a,i,o,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.ual.activeUser,e.prev=1,r=t.accountName,a=t.chainId,!(i=t.requestPermission)&&t.scatter&&(i=t.scatter.identity.accounts[0].authority),o=I(r,i,a),e.next=8,t.signTransaction(o,{expireSeconds:120,blocksBehind:3});case 8:s=e.sent,n.setState({message:"Transfer Successful!"},(function(){setTimeout(n.resetMessage,5e3)})),console.info("SUCCESS:",s),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error("ERROR:",e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])}))),n.resetMessage=function(){return n.setState({message:""})},n.renderLoggedInView=function(){return a.a.createElement(a.a.Fragment,null,!!n.state.message&&a.a.createElement("div",{style:O.announcementBar},a.a.createElement("p",{style:O.baseText},n.state.message)),a.a.createElement("button",{type:"button",onClick:n.purchase,style:Object(c.a)({},O.button,{},O.blueBG)},a.a.createElement("p",{style:O.baseText},"Transfer 0.0001")),a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",{style:O.td},"Blockchain"),a.a.createElement("td",{style:O.td},n.props.ual.chains[0].name)),a.a.createElement("tr",null,a.a.createElement("td",{style:O.td},"Account"),a.a.createElement("td",{style:O.td},n.props.ual.activeUser.accountName)),a.a.createElement("tr",null,a.a.createElement("td",{style:O.td},"Permission"),a.a.createElement("td",{style:O.td},n.props.ual.activeUser.requestPermission)))),a.a.createElement("button",{type:"button",onClick:n.props.ual.logout,style:O.logout},a.a.createElement("p",null,"Logout")))},n.renderLoginButton=function(){return a.a.createElement("button",{type:"button",onClick:n.props.ual.showModal,style:O.button},a.a.createElement("p",{style:{buttonText:O.buttonText,baseText:O.baseText}},"Login using ",n.props.ual.chains[0].name))},n.state={chainId:e.chainId,message:""},n}return Object(d.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return this.props.ual.activeUser?this.renderLoggedInView():this.renderLoginButton()}}]),t}(r.Component),A=function(e){function t(e){var n;Object(u.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).setChain=function(e){return n.setState({chainId:e.target.value})};var r=window.location.search,a=new URLSearchParams(r).get("chain");return n.state={chainId:a||k[0].chainId},n}return Object(d.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.state.chainId,t=this.props.available.filter((function(t){return t.chainId===e})),n=Object(s.a)(t,1)[0];if(!n)return a.a.createElement("div",null,"Invalid Chain ID");var r=new m.Anchor([n],{appName:"ual-anchor-demo",service:"https://cb.anchor.link"}),i=new y.Ledger([n]),o=new b.Scatter([n],{appName:"ual-anchor-demo"});return a.a.createElement("div",{style:O.container},a.a.createElement("p",null,a.a.createElement("select",{defaultValue:e,onChange:this.setChain,style:O.select},k.map((function(e){return a.a.createElement("option",{key:e.chainId,value:e.chainId},e.name)})))),a.a.createElement(w.UALProvider,{appName:"Anchor + Authenticator Test App",authenticators:[r,i,o],chains:[n],key:n.chainId},a.a.createElement(C,null)))}}]),t}(r.Component),O={container:{display:"flex",backgroundColor:"#fff",alignItems:"center",justifyContent:"top",height:"100vh",marginTop:"10vh",flexDirection:"column"},button:{padding:"10px 60px",backgroundColor:"#EA2E2E",textAlign:"center",borderRadius:5,color:"#FFFFFF",fontSize:18,fontWeight:"bold",marginBottom:"2em"},select:{textAlign:"center",borderRadius:5,fontSize:24,fontWeight:"bold",width:"200px"},logout:{marginTop:20},baseText:{color:"#fff",fontSize:18},blueBG:{backgroundColor:"#447DD8"},announcementBar:{width:"100%",padding:"10px 50px 10px 20px",textAlign:"center",backgroundColor:"#3de13d",top:0,position:"absolute",alignItems:"center"}},C=Object(w.withUAL)(T),j=function(){return a.a.createElement(A,{available:k})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},540:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(5),o=n(14),s=n(20),c=n(227);n.d(t,"default",(function(){return f}));var u=function(){function e(t){Object(o.a)(this,e),this.keyPrefix=t}return Object(s.a)(e,[{key:"write",value:function(){var e=Object(i.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem(this.storageKey(t),n);case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",localStorage.getItem(this.storageKey(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(i.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem(this.storageKey(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"storageKey",value:function(e){return"".concat(this.keyPrefix,"-").concat(e)}}]),e}(),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e),this.options=t,this.classPrefix=t.classPrefix||"anchor-link",this.injectStyles=!(!1===t.injectStyles),this.requestStatus=!(!1===t.requestStatus),this.storage=new u(t.storagePrefix||"anchor-link")}return Object(s.a)(e,[{key:"setupElements",value:function(){var e=this;if(this.injectStyles&&!this.styleEl){this.styleEl=document.createElement("style"),this.styleEl.type="text/css";var t="\n/* Anchor Link */\n\n.%prefix% * {\n    box-sizing: border-box;\n    line-height: 1;\n}\n\n.%prefix% {\n    font-family: -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue',\n        Arial, sans-serif;\n    font-size: 13px;\n    background: rgba(0, 0, 0, 0.5);\n    backdrop-filter: blur(5px);\n    -webkit-backdrop-filter: blur(5px);\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    width: 100%;\n    height: 100%;\n    z-index: 2147483647;\n    display: none;\n    align-items: center;\n    justify-content: center;\n}\n\n.%prefix%-active {\n    display: flex;\n}\n\n.%prefix%-inner {\n    background: #F1F1F1;\n    margin: 1em;\n    padding-top: 3.5em;\n    border-radius: 1.5em;\n    box-shadow: 0px 4px 100px rgba(0, 0, 0, .5);\n    width: 24em;\n}\n\n.%prefix%-logo {\n    width: 5em;\n    height: 5em;\n    margin: 0 auto;\n    margin-top: -3.75em;;\n    background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg viewBox='0 0 160 160' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='80' cy='80' r='80' fill='%233650A2'/%3E%3Cpath d='m80.006 30c2.2988 0 4.3956 1.3134 5.3987 3.3818l24.006 49.5 0.542 1.1178h-13.337l-3.8797-8h-25.461l-3.8798 8h-13.337l0.5423-1.1182 24.006-49.5c1.0031-2.0684 3.0998-3.3818 5.3986-3.3818zm-7.8807 36h15.761l-7.8807-16.25-7.8807 16.25zm25.874 35h12.006c-0.361 16.152-13.731 29-29.999 29s-29.638-12.848-29.998-29h12.005c0.281 7.354 5.1673 13.631 11.987 15.996v-23.996c0-3.3137 2.6863-6 6-6s6 2.6863 6 6v24c6.8262-2.362 11.718-8.641 11.999-16z' clip-rule='evenodd' fill='%23fff' fill-rule='evenodd'/%3E%3C/svg%3E%0A\");\n}\n\n.%prefix%-logo.error {\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 70 70'%3E%3Cdefs/%3E%3Ccircle cx='35' cy='35' r='35' fill='%23FC3D39'/%3E%3Cpath fill='%23fff' d='M22.3 48h25.4c2.5 0 4-1.7 4-4a4 4 0 00-.5-2L38.5 19.3a4 4 0 00-3.5-2 4 4 0 00-3.5 2L18.8 42.1c-.3.6-.5 1.3-.5 2 0 2.2 1.6 4 4 4zM35 37c-.9 0-1.4-.6-1.4-1.5l-.2-7.7c0-.9.6-1.6 1.6-1.6s1.7.7 1.7 1.6l-.3 7.7c0 1-.5 1.5-1.4 1.5zm0 6c-1 0-1.9-.8-1.9-1.8s.9-1.8 2-1.8c1 0 1.8.7 1.8 1.8 0 1-.9 1.8-1.9 1.8z'/%3E%3C/svg%3E\");\n}\n\n.%prefix%-logo.success {\n    background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 70 70'%3E%3Cdefs/%3E%3Ccircle cx='35' cy='35' r='35' fill='%233DC55D'/%3E%3Cpath fill='%23fff' d='M30.9 49.7a2 2 0 001.8-1L48 24.9c.3-.5.4-1 .4-1.4 0-1-.7-1.7-1.7-1.7-.8 0-1.2.3-1.6 1L30.8 45.4 23.5 36c-.5-.6-1-.9-1.6-.9-1 0-1.8.8-1.8 1.8 0 .4.2.9.6 1.3L29 48.7c.6.7 1.1 1 1.9 1z'/%3E%3C/svg%3E\");\n}\n\n.%prefix%-request {\n    padding: 1.5em;\n    border-radius: 1.5em;\n    border-top-left-radius: 0;\n    border-top-right-radius: 0;\n    background: white;\n}\n\n.%prefix%-info {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    line-height: 2em;\n}\n\n.%prefix%-title {\n    font-size: 1.8em;\n    margin-top: 0.5em;\n    font-weight: bold;\n}\n\n.%prefix%-subtitle {\n    margin-top: 1em;\n    color: #5C5C5C;\n    text-align: center;\n    margin-bottom: 0.5em;\n}\n\n.%prefix%-actions {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n.%prefix%-uri {\n    width: 100%;\n\n}\n.%prefix%-uri a {\n    color: #007AFF;\n    background: rgba(116, 116, 128, 0.08);\n    text-decoration: none;\n    font-size: 1.3em;\n    flex-grow: 1;\n    flex: 1;\n    width: 100%;\n    padding: 1.5em;\n    border-radius: 0.75em;\n    font-weight: 500;\n    letter-spacing: .01em;\n    text-align: center;\n    display: block;\n    margin-top: 1em;\n}\n\n.%prefix%-qr {\n    margin-top: 1em;\n}\n\n.%prefix%-qr svg {\n    width: 100%;\n}\n".replace(/%prefix%/g,this.classPrefix);this.styleEl.appendChild(document.createTextNode(t)),document.head.appendChild(this.styleEl)}if(this.containerEl||(this.containerEl=this.createEl(),this.containerEl.className=this.classPrefix,this.containerEl.onclick=function(t){t.target===e.containerEl&&(t.stopPropagation(),e.hide(),e.activeCancel&&(e.activeRequest=void 0,e.activeCancel("Modal closed"),e.activeCancel=void 0))},document.body.appendChild(this.containerEl)),!this.requestEl){var n=this.createEl({class:"inner"});this.requestEl=this.createEl({class:"request"}),n.appendChild(this.requestEl),this.containerEl.appendChild(n)}}},{key:"createEl",value:function(e){e||(e={});var t=document.createElement(e.tag||"div");if(e)for(var n=0,r=Object.keys(e);n<r.length;n++){var a=r[n],i=e[a];switch(a){case"tag":break;case"text":t.appendChild(document.createTextNode(i));break;case"class":t.className="".concat(this.classPrefix,"-").concat(i);break;default:t.setAttribute(a,i)}}return t}},{key:"hide",value:function(){this.containerEl&&this.containerEl.classList.remove("".concat(this.classPrefix,"-active")),this.clearTimers()}},{key:"show",value:function(){this.containerEl&&this.containerEl.classList.add("".concat(this.classPrefix,"-active"))}},{key:"displayRequest",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,o,s,u,f,h,d,v,g,m,y,b;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setupElements(),(n=t.clone()).setInfoKey("same_device",!0),n.setInfoKey("return_path",p()),r=n.encode(!0,!1),i=t.encode(!0,!1),o=t.isIdentity(),s=o?"Login":"Sign",u="Scan the QR-code with your Anchor app.",f=this.createEl({class:"qr"}),e.next=12,c.toString(i,{margin:0,errorCorrectionLevel:"L"});case 12:f.innerHTML=e.sent,h=this.createEl({class:"uri"}),(d=this.createEl({tag:"a",href:i,text:"Open Anchor app"})).addEventListener("click",(function(e){e.preventDefault(),window.location.href=r})),h.appendChild(d),v=this.createEl({class:"info"}),g=this.createEl({class:"title",tag:"span",text:s}),m=this.createEl({class:"subtitle",tag:"span",text:u}),v.appendChild(g),v.appendChild(m),(y=this.createEl({class:"actions"})).appendChild(f),y.appendChild(h),l(this.requestEl),b=this.createEl({class:"logo"}),this.requestEl.appendChild(b),this.requestEl.appendChild(v),this.requestEl.appendChild(y),this.show();case 31:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onRequest",value:function(e,t){this.activeRequest=e,this.activeCancel=t,this.displayRequest(e).catch(t)}},{key:"onSessionRequest",value:function(e,t,n){if(e.metadata.sameDevice&&t.setInfoKey("return_path",p()),"fallback"===e.type)return this.onRequest(t,n),void(e.metadata.sameDevice&&(window.location.href=t.encode()));this.activeRequest=t,this.activeCancel=n,this.setupElements();var r=e.metadata.timeout||12e4,a=e.metadata.name,i=Date.now(),o=this.createEl({class:"title",tag:"span",text:"Sign"}),s=function(){var e=r+i-Date.now(),t=e>0?new Date(e).toISOString().substr(14,5):"00:00";o.textContent="Sign - ".concat(t)};this.countdownTimer=setInterval(s,500),s();var c,u=this.createEl({class:"info"});u.appendChild(o),c=a&&a.length>0?"Please open Anchor app on \u201c".concat(a,"\u201d to review and sign the transaction."):"Please review and sign the transaction in the linked wallet.";var f=this.createEl({class:"subtitle",tag:"span",text:c});u.appendChild(f),l(this.requestEl);var h=this.createEl({class:"logo"});this.requestEl.appendChild(h),this.requestEl.appendChild(u),this.show(),/iP(ad|od|hone)/i.test(navigator.userAgent)&&e.metadata.sameDevice&&(window.location.href="anchor://link")}},{key:"clearTimers",value:function(){this.closeTimer&&(clearTimeout(this.closeTimer),this.closeTimer=void 0),this.countdownTimer&&(clearTimeout(this.countdownTimer),this.countdownTimer=void 0)}},{key:"onSuccess",value:function(e){var t=this;if(e===this.activeRequest)if(this.clearTimers(),this.requestStatus){this.setupElements();var n=this.createEl({class:"info"}),r=this.createEl({class:"logo"});r.classList.add("success");var a=this.createEl({class:"title",tag:"span",text:"Success!"}),i=e.isIdentity()?"Identity signed.":"Transaction signed.",o=this.createEl({class:"subtitle",tag:"span",text:i});n.appendChild(a),n.appendChild(o),l(this.requestEl),this.requestEl.appendChild(r),this.requestEl.appendChild(n),this.show(),this.closeTimer=setTimeout((function(){t.hide()}),1500)}else this.hide()}},{key:"onFailure",value:function(e,t){var n=this;if(e===this.activeRequest)if(this.clearTimers(),this.requestStatus){this.setupElements();var r=this.createEl({class:"info"}),a=this.createEl({class:"logo"});a.classList.add("error");var i=this.createEl({class:"title",tag:"span",text:"Transaction error"}),o=this.createEl({class:"subtitle",tag:"span",text:t.message||String(t)});r.appendChild(i),r.appendChild(o),l(this.requestEl),this.requestEl.appendChild(a),this.requestEl.appendChild(r),this.show(),this.closeTimer=setTimeout((function(){n.hide()}),5e3)}else this.hide()}}]),e}();function l(e){for(;e.firstChild;)e.removeChild(e.firstChild)}var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=h.length;function p(){for(var e=window.location.href.split("#")[0]+"#",t=0;t<8;t++)e+=h.charAt(Math.floor(Math.random()*d));return e}},57:function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return g}));var r=n(27),a=n(31),i=n(26),o=n(30),s=n(1),c=n.n(s),u=n(5),f=n(14),l=n(20),h=n(23),d=n(33),p=function(){function e(){Object(f.a)(this,e)}return Object(l.a)(e,[{key:"remove",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.link.storage){e.next=3;break}return e.next=3,this.link.removeSession(this.identifier,this.auth);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"restore",value:function(e,t){switch(t.type){case"channel":return new v(e,t.data,t.metadata);case"fallback":return new g(e,t.data,t.metadata);default:throw new Error("Unable to restore, session data invalid")}}}]),e}(),v=function(e){function t(e,n,o){var s;return Object(f.a)(this,t),(s=Object(a.a)(this,Object(i.a)(t).call(this))).type="channel",s.timeout=12e4,s.link=e,s.auth=n.auth,s.publicKey=n.publicKey,s.channel=n.channel,s.identifier=n.identifier,s.encrypt=function(e){return Object(d.e)(e.encode(!0,!1),n.requestKey,n.channel.key)},s.metadata=Object(r.a)({},o||{},{timeout:s.timeout,name:s.channel.name}),s.serialize=function(){return{type:"channel",data:n,metadata:s.metadata}},s}return Object(o.a)(t,e),Object(l.a)(t,[{key:"onSuccess",value:function(e,t){this.link.transport.onSuccess&&this.link.transport.onSuccess(e,t)}},{key:"onFailure",value:function(e,t){this.link.transport.onFailure&&this.link.transport.onFailure(e,t)}},{key:"onRequest",value:function(e,t){var n={expiration:new Date(Date.now()+this.timeout).toISOString().slice(0,-1)};this.link.transport.onSessionRequest&&this.link.transport.onSessionRequest(this,e,t),setTimeout((function(){t(new h.c("Wallet did not respond in time","E_TIMEOUT"))}),this.timeout+500),e.data.info.push({key:"link",value:Object(d.a)(n,"link_info")}),this.link.rpc.fetchBuiltin(this.channel.url,{method:"POST",headers:{"X-Buoy-Wait":(this.timeout/1e3).toFixed(0)},body:this.encrypt(e)}).then((function(e){200!==e.status&&t(new h.c("Unable to push message","E_DELIVERY"))})).catch((function(e){t(new h.c("Unable to reach link service (".concat(e.message||String(e),")"),"E_DELIVERY"))}))}},{key:"makeSignatureProvider",value:function(){return this.link.makeSignatureProvider([this.publicKey],this)}},{key:"makeAuthorityProvider",value:function(){return this.link.makeAuthorityProvider()}},{key:"transact",value:function(e,t){return this.link.transact(e,t,this)}}]),t}(p),g=function(e){function t(e,n,r){var o;return Object(f.a)(this,t),(o=Object(a.a)(this,Object(i.a)(t).call(this))).type="fallback",o.link=e,o.auth=n.auth,o.publicKey=n.publicKey,o.metadata=r||{},o.identifier=n.identifier,o.serialize=function(){return{type:o.type,data:n,metadata:o.metadata}},o}return Object(o.a)(t,e),Object(l.a)(t,[{key:"onSuccess",value:function(e,t){this.link.transport.onSuccess&&this.link.transport.onSuccess(e,t)}},{key:"onFailure",value:function(e,t){this.link.transport.onFailure&&this.link.transport.onFailure(e,t)}},{key:"onRequest",value:function(e,t){this.link.transport.onSessionRequest?this.link.transport.onSessionRequest(this,e,t):this.link.transport.onRequest(e,t)}},{key:"makeSignatureProvider",value:function(){return this.link.makeSignatureProvider([this.publicKey],this)}},{key:"makeAuthorityProvider",value:function(){return this.link.makeAuthorityProvider()}},{key:"transact",value:function(e,t){return this.link.transact(e,t,this)}}]),t}(p)},63:function(e,t,n){"use strict";(function(t){var r=n(79),a=r(n(101)),i=r(n(80)),o=n(11),s=n(102),c=n(35),u=s.getCurveByName("secp256k1"),f=n(44),l=n(64),h=u.G,d=u.n;function p(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EOS";if("string"===typeof e){var r=p.fromString(e,n);return o(null!=r,"Invalid public key"),r}if(t.isBuffer(e))return p.fromBuffer(e);if("object"===(0,i.default)(e)&&e.Q)return p(e.Q);function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.compressed;return e.getEncoded(t)}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"EOS";return e+l.checkEncode(a())}function g(){var t=e.getEncoded(!1),n=s.Point.decodeFrom(u,t);return p.fromPoint(n)}function m(n){console.error("Deprecated warning: PublicKey.child"),o(t.isBuffer(n),"Buffer required: offset"),o.equal(n.length,32,"offset length"),n=t.concat([a(),n]),n=f.sha256(n);var r=c.fromBuffer(n);if(r.compareTo(d)>=0)throw new Error("Child offset went out of bounds, try again");var i=h.multiply(r),s=e.add(i);if(u.isInfinity(s))throw new Error("Child offset derived to an invalid key, try again");return p.fromPoint(s)}function y(){return a().toString("hex")}return o.equal((0,i.default)(e),"object","Invalid public key"),o.equal((0,i.default)(e.compressed),"boolean","Invalid public key"),{Q:e,toString:v,toUncompressed:g,toBuffer:a,child:m,toHex:y}}e.exports=p,p.isValid=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EOS";try{return p(e,t),!0}catch(n){return!1}},p.fromBinary=function(e){return p.fromBuffer(new t(e,"binary"))},p.fromBuffer=function(e){return p(s.Point.decodeFrom(u,e))},p.fromPoint=function(e){return p(e)},p.fromString=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EOS";try{return p.fromStringOrThrow(e,t)}catch(n){return null}},p.fromStringOrThrow=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EOS";o.equal((0,i.default)(e),"string","public_key");var n=e.match(/^PUB_([A-Za-z0-9]+)_([A-Za-z0-9]+)$/);if(null===n){var r=new RegExp("^"+t);return r.test(e)&&(e=e.substring(t.length)),p.fromBuffer(l.checkDecode(e))}o(3===n.length,"Expecting public key like: PUB_K1_base58pubkey..");var s=(0,a.default)(n,3),c=s[1],u=s[2];return o.equal(c,"K1","K1 private key expected"),p.fromBuffer(l.checkDecode(u,c))},p.fromHex=function(e){return p.fromBuffer(new t(e,"hex"))},p.fromStringHex=function(e){return p.fromString(new t(e,"hex"))}}).call(this,n(2).Buffer)},64:function(e,t,n){"use strict";(function(t){var r=n(79)(n(80)),a=n(298),i=n(11),o=n(132),s=n(44);e.exports={random32ByteBuffer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.cpuEntropyBits,a=void 0===n?0:n,c=e.safe,h=void 0===c||c;i.equal((0,r.default)(a),"number","cpuEntropyBits"),i.equal((0,r.default)(h),"boolean","boolean"),h&&i(u>=128,"Call initialize() to add entropy");var d=[];return d.push(o(32)),d.push(t.from(l(a))),d.push(f),d.push(p()),s.sha256(t.concat(d))},addEntropy:function(){i.equal(f.length,101,"externalEntropyArray");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];u+=t.length;for(var r=0,a=t;r<a.length;r++){var o=a[r],s=c++%101,l=f[s]+=o;l>9007199254740991&&(f[s]=0)}},cpuEntropy:l,entropyCount:function(){return u},checkDecode:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(null!=e,"private key expected");var r,o=new t(a.decode(e)),c=o.slice(-4),u=o.slice(0,-4);if("sha256x2"===n)r=s.sha256(s.sha256(u)).slice(0,4);else{var f=[u];n&&f.push(t.from(n)),r=s.ripemd160(t.concat(f)).slice(0,4)}if(c.toString("hex")!==r.toString("hex"))throw new Error("Invalid checksum, "+"".concat(c.toString("hex")," != ").concat(r.toString("hex")));return u},checkEncode:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(i(t.isBuffer(e),"expecting keyBuffer<Buffer>"),"sha256x2"===n){var r=s.sha256(s.sha256(e)).slice(0,4);return a.encode(t.concat([e,r]))}var o=[e];n&&o.push(t.from(n));var c=s.ripemd160(t.concat(o)).slice(0,4);return a.encode(t.concat([e,c]))}};var c=0,u=0,f=o(101);function l(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128,t=[],n=null,r=0;t.length<e;){var a=h();if(null!=n){var i=a-n;if(Math.abs(i)<1){r++;continue}var o=Math.floor(d(Math.abs(i))+1);if(o<4){o<2&&r++;continue}t.push(i)}n=a}if(r>10){var s=Number(r/e*100).toFixed(2);console.warn("WARN: ".concat(s,"% low CPU entropy re-sampled"))}return t}function h(){for(var e=Date.now(),t=0,n=0;Date.now()<e+7+1;)n=Math.sin(Math.sqrt(Math.log(++t+n)));return t}var d=function(e){return Math.log(e)/Math.LN2};function p(){var e=Array(o(101)).join();try{e+=(new Date).toString()+" "+window.screen.height+" "+window.screen.width+" "+window.screen.colorDepth+"  "+window.screen.availHeight+" "+window.screen.availWidth+" "+window.screen.pixelDepth+navigator.language+" "+window.location+" "+window.history.length;for(var n,r=0;r<navigator.mimeTypes.length;r++)e+=(n=navigator.mimeTypes[r]).description+" "+n.type+" "+n.suffixes+" "}catch(c){e+=s.sha256((new Date).toString())}for(var a=e+=new t(e).toString("binary")+" "+(new Date).toString(),i=Date.now();Date.now()-i<25;)a=s.sha256(a);return a}}).call(this,n(2).Buffer)},81:function(e,t,n){"use strict";(function(t){var r=n(79),a=r(n(300)),i=r(n(101)),o=r(n(80)),s=n(102),c=s.Point,u=s.getCurveByName("secp256k1"),f=n(35),l=n(11),h=n(44),d=n(63),p=n(64),v=n(151),g=n(304);u.G,u.n;function m(e){if("string"===typeof e)return m.fromString(e);if(t.isBuffer(e))return m.fromBuffer(e);if("object"===(0,o.default)(e)&&f.isBigInteger(e.d))return m(e.d);if(!f.isBigInteger(e))throw new TypeError("Invalid private key");function n(){var e=a();return e=t.concat([new t([128]),e]),p.checkEncode(e,"sha256x2")}var r;function a(){return e.toBuffer(32)}return{d:e,toWif:n,toString:function(){return n()},toPublic:function(){if(r)return r;var t=u.G.multiply(e);return r=d.fromPoint(t)},toBuffer:a,getSharedSecret:function(e){var t=(e=d(e)).toUncompressed().toBuffer(),n=c.fromAffine(u,f.fromBuffer(t.slice(1,33)),f.fromBuffer(t.slice(33,65))),r=a(),i=n.multiply(f.fromBuffer(r)).affineX.toBuffer({size:32});return h.sha512(i)},getChildKey:function(e){return m(v("sha256").update(a()).update(e).digest())}}}function y(e){l.equal((0,o.default)(e),"string","privateStr");var t=e.match(/^PVT_([A-Za-z0-9]+)_([A-Za-z0-9]+)$/);if(null===t){var n=p.checkDecode(e,"sha256x2"),r=n.readUInt8(0);l.equal(128,r,"Expected version ".concat(128,", instead got ",r));return{privateKey:m.fromBuffer(n.slice(1)),format:"WIF",keyType:"K1"}}l(3===t.length,"Expecting private key like: PVT_K1_base58privateKey..");var a=(0,i.default)(t,3),s=a[1],c=a[2];return l.equal(s,"K1","K1 private key expected"),{privateKey:m.fromBuffer(p.checkDecode(c,s)),format:"PVT",keyType:s}}e.exports=m,m.fromHex=function(e){return m.fromBuffer(new t(e,"hex"))},m.fromBuffer=function(e){if(!t.isBuffer(e))throw new Error("Expecting parameter to be a Buffer type");if(33===e.length&&1===e[32]&&(e=e.slice(0,-1)),32!==e.length)throw new Error("Expecting 32 bytes, instead got ".concat(e.length));return m(f.fromBuffer(e))},m.fromSeed=function(e){if("string"!==typeof e)throw new Error("seed must be of type string");return m.fromBuffer(h.sha256(e))},m.isWif=function(e){try{return l("WIF"===y(e).format),!0}catch(t){return!1}},m.isValid=function(e){try{return m(e),!0}catch(t){return!1}},m.fromWif=function(e){return console.log("PrivateKey.fromWif is deprecated, please use PrivateKey.fromString"),m.fromString(e)},m.fromString=function(e){return y(e).privateKey},m.randomKey=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return m.initialize().then((function(){return m.fromBuffer(p.random32ByteBuffer({cpuEntropyBits:e}))}))},m.unsafeRandomKey=function(){return Promise.resolve(m.fromBuffer(p.random32ByteBuffer({safe:!1})))};var b=!1;m.initialize=g((function(){b||(!function(){var e=m(h.sha256("")),t="key comparison test failed on a known private key";l.equal(e.toWif(),"5KYZdUEo39z3FPrtuX2QbbwGnNP5zTd7yyr2SC1j299sBCnWjss",t),l.equal(e.toString(),"5KYZdUEo39z3FPrtuX2QbbwGnNP5zTd7yyr2SC1j299sBCnWjss",t);var n=e.toPublic();l.equal(n.toString(),"EOS859gxfnXyUriMgUeThh1fWv3oqcpLFyHa3TfFYC4PK2HqhToVM","pubkey string comparison test failed on a known public key"),w((function(){return m.fromString(e.toWif())}),"converting known wif from string"),w((function(){return m.fromString(e.toString())}),"converting known pvt from string"),w((function(){return d.fromString(n.toString())}),"converting known public key from string"),!0}(),p.addEntropy.apply(p,(0,a.default)(p.cpuEntropy())),l(p.entropyCount()>=128,"insufficient entropy"),b=!0)}));var w=function(e,t){try{e()}catch(n){throw n.message="".concat(t," ==> ").concat(n.message),n}}}).call(this,n(2).Buffer)},90:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return I}));var r=n(27),a=n(1),i=n.n(a),o=n(5),s=n(14),c=n(20),u=n(22),f=n(6),l=n(41),h=n(224),d=n.n(h),p=n(72),v=n.n(p),g=n(225),m=n.n(g),y=n(541),b=n(23),w=n(91),k=n(57),x=n(33),E=d()().fetch,I=function(){function t(e){if(Object(s.a)(this,t),this.abiCache=new Map,"object"!==typeof e)throw new TypeError("Missing options object");if(!e.transport)throw new TypeError("options.transport is required, see https://github.com/greymass/anchor-link#transports");void 0===e.rpc||"string"===typeof e.rpc?this.rpc=new f.JsonRpc(e.rpc||w.a.rpc,{fetch:E}):this.rpc=e.rpc,e.chainId?this.chainId="number"===typeof e.chainId?u.f(e.chainId):e.chainId:this.chainId=w.a.chainId,this.serviceAddress=(e.service||w.a.service).trim().replace(/\/$/,""),this.transport=e.transport,null!==e.storage&&(this.storage=e.storage||this.transport.storage),this.requestOptions={abiProvider:this,textDecoder:e.textDecoder||new TextDecoder,textEncoder:e.textEncoder||new TextEncoder,zlib:m.a}}return Object(c.a)(t,[{key:"getAbi",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.abiCache.get(t)){e.next=6;break}return e.next=4,this.rpc.get_abi(t);case 4:(n=e.sent.abi)&&this.abiCache.set(t,n);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createCallbackUrl",value:function(){return"".concat(this.serviceAddress,"/").concat(Object(y.a)())}},{key:"createRequest",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.e.create(Object(r.a)({},t,{chainId:this.chainId,broadcast:!1,callback:{url:this.createCallbackUrl(),background:!0}}),this.requestOptions);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendRequest",value:function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r,a,o,s,c,f,l,h,d,p,v,g,m,y,w=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=w.length>2&&void 0!==w[2]&&w[2],a=n||this.transport,e.prev=2,(o=t.data.callback).startsWith(this.serviceAddress)){e.next=6;break}throw new Error("Request must have a link callback");case 6:if(2===t.data.flags){e.next=8;break}throw new Error("Invalid request flags");case 8:return c=S(o,s={}),f=new Promise((function(e,n){a.onRequest(t,(function(e){s.cancel&&s.cancel(),n("string"===typeof e?new b.a(e):e)}))})),e.next=13,Promise.race([c,f]);case 13:return l=e.sent,h={actor:l.sa,permission:l.sp},d=Object.keys(l).filter((function(e){return e.startsWith("sig")&&"sig0"!==e})).map((function(e){return l[e]})),e.next=18,u.d.fromPayload(l,this.requestOptions);case 18:if(p=e.sent,v=p.serializedTransaction,g=p.transaction,m={request:p.request,serializedTransaction:v,transaction:g,signatures:d,payload:l,signer:h},!r){e.next=26;break}return e.next=24,this.rpc.push_transaction({signatures:m.signatures,serializedTransaction:m.serializedTransaction});case 24:y=e.sent,m.processed=y.processed;case 26:return a.onSuccess&&a.onSuccess(t,m),e.abrupt("return",m);case 30:throw e.prev=30,e.t0=e.catch(2),a.onFailure&&a.onFailure(t,e.t0),e.t0;case 34:case"end":return e.stop()}}),e,this,[[2,30]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"transact",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r,a,o,s,c,u,f,l=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},r=n.broadcast,a=void 0===r||r,o=n.sign,void 0===o||o,s=n.blocksBehind,c=n.expireSeconds,u=l.length>2?l[2]:void 0,f={broadcast:a,blocksBehind:s,expireSeconds:c},1===Object.keys(t).length?1===t.actions.length?f.action=t.actions[0]:f.actions=t.actions:f.transaction=t,e.abrupt("return",this.linkTransact(f,u));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkTransact",value:function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r,a,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n||this.transport,a=t.broadcast||!1,e.next=4,this.createRequest(t);case 4:return o=e.sent,e.next=7,this.sendRequest(o,r,a);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"identify",value:function(){var t=Object(o.a)(i.a.mark((function t(n,a){var o,s,c,f,h,d,p,v,g;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.createRequest({identity:{permission:n||null},info:a});case 2:return o=t.sent,t.next=5,this.sendRequest(o);case 5:if((s=t.sent).request.isIdentity()){t.next=8;break}throw new b.b("Unexpected response");case 8:return c=e.concat([e.from(o.getChainId(),"hex"),e.from(s.serializedTransaction),e.alloc(32)]),f=s.signer,h=l.recover(s.signatures[0],c),t.next=13,this.rpc.get_account(f.actor);case 13:if(d=t.sent){t.next=16;break}throw new b.b("Signature from unknown account: ".concat(f.actor));case 16:if(p=d.permissions.find((function(e){return e.perm_name===f.permission}))){t.next=19;break}throw new b.b("".concat(f.actor," signed for unknown permission: ").concat(f.permission));case 19:if(v=p.required_auth,g=v.keys.find((function(e){var t=e.key;return Object(x.d)(t,h)}))){t.next=23;break}throw new b.b("".concat(T(f)," has no key matching id signature"));case 23:if(!(v.threshold>g.weight)){t.next=25;break}throw new b.b("".concat(T(f)," signature does not reach auth threshold"));case 25:if(!n){t.next=28;break}if(!(n.actor!==u.b&&n.actor!==f.actor||n.permission!==u.c&&n.permission!==f.permission)){t.next=28;break}throw new b.b("Unexpected identity proof from ".concat(T(f),", expected ").concat(T(n)," "));case 28:return t.abrupt("return",Object(r.a)({},s,{account:d,signerKey:h}));case 29:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a,o,s,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.b)();case 2:return n=e.sent,a=l.privateToPublic(n),o={session_name:t,request_key:a},e.next=7,this.identify(void 0,{link:Object(x.a)(o,"link_create")});case 7:if(s=e.sent,c={sameDevice:void 0!==s.request.getRawInfo().return_path},u=s.payload.link_ch&&s.payload.link_key&&s.payload.link_name?new k.a(this,{identifier:t,auth:s.signer,publicKey:s.signerKey,channel:{url:s.payload.link_ch,key:s.payload.link_key,name:s.payload.link_name},requestKey:n},c):new k.b(this,{identifier:t,auth:s.signer,publicKey:s.signerKey},c),!this.storage){e.next=13;break}return e.next=13,this.storeSession(t,u);case 13:return e.abrupt("return",Object(r.a)({},s,{session:u}));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"restoreSession",value:function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r,a,o,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.storage){e.next=2;break}throw new Error("Unable to restore session: No storage adapter configured");case 2:if(!n){e.next=6;break}r=this.sessionKey(t,T(n)),e.next=12;break;case 6:return e.next=8,this.listSessions(t);case 8:if(a=e.sent[0]){e.next=11;break}return e.abrupt("return",null);case 11:r=this.sessionKey(t,T(a));case 12:return e.next=14,this.storage.read(r);case 14:if(o=e.sent){e.next=17;break}return e.abrupt("return",null);case 17:e.prev=17,s=JSON.parse(o),e.next=24;break;case 21:throw e.prev=21,e.t0=e.catch(17),new Error("Unable to restore session: Stored JSON invalid (".concat(e.t0.message||String(e.t0),")"));case 24:if(c=k.c.restore(this,s),!n){e.next=28;break}return e.next=28,this.touchSession(t,n);case 28:return e.abrupt("return",c);case 29:case"end":return e.stop()}}),e,this,[[17,21]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"listSessions",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.storage){e.next=2;break}throw new Error("Unable to list sessions: No storage adapter configured");case 2:return n=this.sessionKey(t,"list"),e.prev=3,e.t0=JSON,e.next=7,this.storage.read(n);case 7:if(e.t1=e.sent,e.t1){e.next=10;break}e.t1="[]";case 10:e.t2=e.t1,r=e.t0.parse.call(e.t0,e.t2),e.next=17;break;case 14:throw e.prev=14,e.t3=e.catch(3),new Error("Unable to list sessions: Stored JSON invalid (".concat(e.t3.message||String(e.t3),")"));case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}}),e,this,[[3,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"removeSession",value:function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.storage){e.next=2;break}throw new Error("Unable to remove session: No storage adapter configured");case 2:return r=this.sessionKey(t,T(n)),e.next=5,this.storage.remove(r);case 5:return e.next=7,this.touchSession(t,n,!0);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"clearSessions",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r,a,o,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.storage){e.next=2;break}throw new Error("Unable to clear sessions: No storage adapter configured");case 2:return n=!0,r=!1,a=void 0,e.prev=5,e.next=8,this.listSessions(t);case 8:e.t0=Symbol.iterator,o=e.sent[e.t0]();case 10:if(n=(s=o.next()).done){e.next=17;break}return c=s.value,e.next=14,this.removeSession(t,c);case 14:n=!0,e.next=10;break;case 17:e.next=23;break;case 19:e.prev=19,e.t1=e.catch(5),r=!0,a=e.t1;case 23:e.prev=23,e.prev=24,n||null==o.return||o.return();case 26:if(e.prev=26,!r){e.next=29;break}throw a;case 29:return e.finish(26);case 30:return e.finish(23);case 31:case"end":return e.stop()}}),e,this,[[5,19,23,31],[24,,26,30]])})));return function(t){return e.apply(this,arguments)}}()},{key:"makeSignatureProvider",value:function(e,t){var n=this;return{getAvailableKeys:function(){var t=Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),sign:function(){var e=Object(o.a)(i.a.mark((function e(a){var o,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=u.e.fromTransaction(a.chainId,a.serializedTransaction,n.requestOptions)).setCallback(n.createCallbackUrl(),!0),o.setBroadcast(!1),e.next=5,n.sendRequest(o,t);case 5:return s=e.sent,c=s.signatures,e.abrupt("return",Object(r.a)({},a,{signatures:c}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}},{key:"makeAuthorityProvider",value:function(){var e=this.rpc;return{getRequiredKeys:function(t){return Object(o.a)(i.a.mark((function n(){var r,a,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.availableKeys,a=t.transaction,n.next=3,e.fetch("/v1/chain/get_required_keys",{transaction:a,available_keys:r.map(x.c)});case 3:return o=n.sent,n.abrupt("return",o.required_keys.map(x.c));case 5:case"end":return n.stop()}}),n)})))()}}}},{key:"touchSession",value:function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r,a,o,s,c,u=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],e.next=3,this.listSessions(t);case 3:return a=e.sent,o=T(n),(s=a.findIndex((function(e){return T(e)===o})))>=0&&a.splice(s,1),!1===r&&a.unshift(n),c=this.sessionKey(t,"list"),e.next=11,this.storage.write(c,JSON.stringify(a));case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"storeSession",value:function(){var e=Object(o.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.sessionKey(t,T(n.auth)),a=JSON.stringify(n.serialize()),e.next=4,this.storage.write(r,a);case 4:return e.next=6,this.touchSession(t,n.auth);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sessionKey",value:function(e,t){return[this.chainId,e,t].join("-")}}]),t}();function S(e,t){return new Promise((function(n,r){var a=!0,i=0,o=e.replace(/^http/,"ws"),s=function(e){try{n(JSON.parse(e))}catch(t){t.message="Unable to parse callback JSON: "+t.message,r(t)}};!function e(){var n=new v.a(o);t.cancel=function(){a=!1,n.readyState!==v.a.OPEN&&n.readyState!==v.a.CONNECTING||n.close()},n.onmessage=function(e){if(a=!1,n.readyState===v.a.OPEN&&n.close(),"undefined"!==typeof Blob&&e.data instanceof Blob){var t=new FileReader;t.onload=function(){s(t.result)},t.onerror=function(e){r(e)},t.readAsText(e.data)}else"string"===typeof e.data?s(e.data):s(e.data.toString())},n.onopen=function(){i=0},n.onerror=function(e){},n.onclose=function(t){var n;a&&setTimeout(e,(n=i++,Math.min(Math.pow(10*n,2),1e4)))}}()}))}function T(e){var t=e.actor,n=e.permission;return t===u.b&&(t="<any>"),n!==u.b&&n!==u.c||(n="<any>"),"".concat(t,"@").concat(n)}}).call(this,n(2).Buffer)},91:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={chainId:"aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906",rpc:"https://eos.greymass.com",service:"https://cb.anchor.link"}}},[[233,1,2]]]);
//# sourceMappingURL=main.9421167b.chunk.js.map